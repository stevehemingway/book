!function(e){function t(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var o={};t.m=e,t.c=o,t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=434)}({1:function(e,t,o){"use strict";t.EnvConfig=o(78),t.Events=o(79),t.jsonp=o(80),t.scriptLoader=o(28),t.storageWrapper={localStorage:o(82),sessionStorage:o(83)},t.logger=o(84),t.functionSync={parallel:o(85)},t.initDomConstruct=o(86),t.dateHelper=o(87),t.merge=o(27),t.dom={ScrollMonitor:o(88),offset:o(89),windowSize:o(90)},t.cookie=o(31),t.ftUser=o(91),t.generateId=o(30)},10:function(e,t,o){"use strict";var n=o(5),i=o(92),r=o(94),s=o(16),a=o(32),l=o(97),c=o(1);n.set(l),t.api={getLivefyreInitConfig:i.livefyre.getInitConfig,getCommentCount:i.livefyre.getCommentCount,getCommentCounts:i.livefyre.getCommentCounts,getAuth:i.user.getAuth,updateUser:i.user.updateUser,getComments:r.getComments,postComment:r.postComment,deleteComment:r.deleteComment,stream:{create:a.create,destroy:a.destroy}},t.cache={clear:s.clear,clearAuth:s.clearAuth,clearLivefyreInit:s.clearLivefyreInit},t.enableLogging=function(){c.logger.enable.apply(this,arguments)},t.disableLogging=function(){c.logger.disable.apply(this,arguments)},t.setLoggingLevel=function(){c.logger.setLevel.apply(this,arguments)},t.setConfig=function(){n.set.apply(this,arguments)},document.addEventListener("o.DOMContentLoaded",function(){try{var e=document.querySelector('script[type="application/json"][data-o-comment-api-config]');if(e){var o=JSON.parse(e.innerHTML);t.setConfig(o)}}catch(e){c.logger.log("Invalid config in the DOM.",e)}})},104:function(e,t,o){"use strict";function n(e){return!!a.storageWrapper.sessionStorage.hasItem(g)&&a.storageWrapper.sessionStorage.getItem(g)===e}function i(e){a.storageWrapper.sessionStorage.setItem(g,e)}function r(){a.storageWrapper.sessionStorage.removeItem(g)}function s(e){"function"!=typeof e&&(e=function(){}),c.api.getAuth({force:!0},function(o,n){n&&n.token?t.login(function(t,o){t?e(null,o):e(new Error("Not logged in."))}):n&&!1===n.pseudonym?t.loginRequiredPseudonymMissing(e):e(o||new Error("Login failed."))})}var a=o(1),l=o(105),c=o(10),u=o(49),d=o(20),f=o(109),m=o(36),p=void 0,g="o-comments-auth-last-token",h=!1;t.pseudonymMissing=!1,t.pseudonymWasMissing=!1,t.authPageReload=!1,t.getAuthDelegate=function(){return p||(p={login:function(e){t.loginRequired(function(o,r){if(o)return void e(o);r&&r.token?n(r.token)?e(null,{livefyre:r.token}):t.logout(function(){e(null,{livefyre:r.token}),i(r.token)}):(t.logout(),e(new Error("Not authenticated.")))})},logout:function(e){a.logger.debug("auth delegate logout"),d.trigger("auth.logout"),r(),c.cache.clearAuth(),e()},viewProfile:function(){},editProfile:function(){}}),p},t.login=function(e){"function"!=typeof e&&(e=function(){}),f.loadLivefyreCore(function(o){if(o)return h=!1,void e(!1);c.api.getAuth(function(o,s){if(o)return h=!1,void e(!1);s?s.token?Livefyre.require(["auth"],function(t){n(s.token)||t.logout(),t.authenticate({livefyre:s.token}),i(s.token),h=!0,d.trigger("auth.login",s),e(!0,s)}):!1===s.pseudonym?(t.pseudonymMissing=!0,t.pseudonymWasMissing=!0,r(),h=!1,e(!1,s)):(h=!1,e(!1,s)):(h=!1,e(!1))})})},t.logout=function(e){f.loadLivefyreCore(function(t){t||Livefyre.require(["auth"],function(t){t.logout(),h=!1,"function"==typeof e&&e()})})},t.loginRequiredPseudonymMissing=function(e,o){"function"!=typeof e&&(e=function(){}),a.logger.log("pseudonymMissing"),l.showSetPseudonymDialog(function(n,i){if(n)return u.emptyLivefyreActionQueue(),void e(n);!0!==t.authPageReload||o||u.emptyLivefyreActionQueue(),i&&i.token?t.login(function(t,o){t?e(null,o):e(new Error("Not logged in."))}):e(new Error("Login failed."))})},t.loginRequiredDefaultBehavior=function(){window.location.href=m.get("loginUrl")+"?location="+encodeURIComponent(document.location.href)};var y=function(e){t.loginRequiredDefaultBehavior(e.detail.callback)};t.setLoginRequiredDefaultBehavior=function(){d.off("auth.loginRequired",y),d.on("auth.loginRequired",y)},t.loginRequired=function(e){"function"!=typeof e&&(e=function(){}),c.api.getAuth(function(o,n){n&&!1===n.pseudonym?t.loginRequiredPseudonymMissing(e):n&&n.token?h?e(null):t.login(function(t,o){t?e(null,o):e(new Error("Not logged in."))}):a.ftUser.isLoggedIn()?(a.logger.log("session expired, show inactivity message"),l.showInactivityMessage({submit:function(){window.location.href=m.get("loginUrl")+"?location="+encodeURIComponent(document.location.href)},close:function(){u.emptyLivefyreActionQueue(),e(new Error("Login failed."))}})):(a.logger.log("user should log in"),t.setLoginRequiredDefaultBehavior(),d.trigger("auth.loginRequired",{callback:function(t){if(t)return u.emptyLivefyreActionQueue(),void e(t||new Error("Login failed."));s(e)}}))})}},105:function(e,t,o){"use strict";function n(e,t){if(Array.prototype.indexOf)return-1!==e.indexOf(t);for(var o=0;o<e.length;o++)if(e[o]===t)return!0;return!1}function i(e){return n(p,e)}function r(e){return n(g,e)}function s(e,t){var o=[],n=[];return e.emailcomments!==t.emailcomments&&(!r(e.emailcomments)&&e.emailcomments||!i(t.emailcomments)||o.push("emailcomments"),i(e.emailcomments)&&r(t.emailcomments)&&n.push("emailcomments")),e.emailreplies!==t.emailreplies&&(!r(e.emailreplies)&&e.emailreplies||!i(t.emailreplies)||o.push("emailreplies"),i(e.emailreplies)&&r(t.emailreplies)&&n.push("emailreplies")),e.emaillikes!==t.emaillikes&&(!r(e.emaillikes)&&e.emaillikes||!i(t.emaillikes)||o.push("emaillikes"),i(e.emaillikes)&&r(t.emaillikes)&&n.push("emaillikes")),e.emailautofollow!==t.emailautofollow&&(!r(e.emailautofollow)&&e.emailautofollow||!i(t.emailautofollow)||o.push("emailautofollow"),i(e.emailautofollow)&&r(t.emailautofollow)&&n.push("emailautofollow")),{subscribes:o,unsubscribes:n}}function a(e){var t=[];return i(e.emailcomments)&&t.push("emailcomments"),i(e.emailreplies)&&t.push("emailreplies"),i(e.emaillikes)&&t.push("emaillikes"),i(e.emailautofollow)&&t.push("emailautofollow"),{subscribes:t}}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=o(106),u=o(10),d=o(49),f=o(104),m=o(20),p=["immediately","hourly","on"],g=["never","off"];t.showSetPseudonymDialog=function(e){e=e||function(){},c.userDialogs.showSetPseudonymDialog({submit:function(t,o){t&&t.pseudonym?u.api.updateUser({pseudonym:t.pseudonym},function(t){if(t)return void o("object"===(void 0===t?"undefined":l(t))&&t.sudsError?c.i18n.serviceMessageOverrides.hasOwnProperty(t.error)?c.i18n.serviceMessageOverrides[t.error]:t.error:c.i18n.texts.changePseudonymError);u.api.getAuth({force:!0},function(t,n){if(t)return o(c.i18n.texts.changePseudonymError),void e(t);e(null,n),o()})}):o(c.i18n.texts.changePseudonymBlankError)},close:function(){e(new Error("Closed or cancelled.")),d.emptyLivefyreActionQueue()}})},t.showChangePseudonymDialog=function(e,t){t=t||function(){},c.userDialogs.showChangePseudonymDialog(e,{submit:function(e,o){e?u.api.updateUser(e,function(e){if(e)return void o("object"===(void 0===e?"undefined":l(e))&&e.sudsError?c.i18n.serviceMessageOverrides.hasOwnProperty(e.error)?c.i18n.serviceMessageOverrides[e.error]:e.error:c.i18n.texts.genericError);f.logout(),u.api.getAuth({force:!0},function(e,n){if(e)return t(e),void o(c.i18n.texts.genericError);f.login(),t(null,n),o()})}):o(c.i18n.texts.genericError)},close:function(){t(new Error("Closed or cancelled."))}})},t.showEmailAlertDialog=function(){c.userDialogs.showEmailAlertDialog({submit:function(e,t){e?u.api.updateUser(e,function(e){if(e)return void t("object"===(void 0===e?"undefined":l(e))&&e.sudsError?c.i18n.serviceMessageOverrides.hasOwnProperty(e.error)?c.i18n.serviceMessageOverrides[e.error]:e.error:c.i18n.texts.genericError);f.logout(),u.api.getAuth({force:!0},function(e,o){if(e)return void t(c.i18n.texts.genericError);f.login(),t();var n=void 0;n=a(o.settings),n.subscribes.length&&m.trigger("tracking.subscribe",n.subscribes)})}):t(c.i18n.texts.genericError)}})},t.showSettingsDialog=function(e,t){t=t||function(){},c.userDialogs.showSettingsDialog(e,{submit:function(o,n){o?u.api.updateUser(o,function(o){if(o)return void n("object"===(void 0===o?"undefined":l(o))&&o.sudsError?c.i18n.serviceMessageOverrides.hasOwnProperty(o.error)?c.i18n.serviceMessageOverrides[o.error]:o.error:c.i18n.texts.genericError);f.logout(),u.api.getAuth({force:!0},function(o,i){if(o)return t(o),void n(c.i18n.texts.genericError);f.login(),t(null,i),n();var r=void 0;e.settings?r=s(e.settings,i.settings):(r=a(i.settings),r.unsubscribes=[]),r.subscribes.length&&m.trigger("tracking.subscribe",r.subscribes),r.unsubscribes.length&&m.trigger("tracking.unsubscribe",r.unsubscribes)})}):n(c.i18n.texts.genericError)},close:function(){t(new Error("Closed or cancelled."))}})},t.showInactivityMessage=c.userDialogs.showInactivityMessage},106:function(e,t,o){"use strict";var n=o(1);t.Widget=o(438),t.WidgetUi=o(166),t.userDialogs=o(448),t.utils=o(108),t.i18n=o(167),t.templates=o(107),t.templatingEngine=o(48),t.enableLogging=function(){n.logger.enable.apply(this,arguments)},t.disableLogging=function(){n.logger.disable.apply(this,arguments)},t.setLoggingLevel=function(){n.logger.setLevel.apply(this,arguments)}},107:function(e,t,o){"use strict";var n=o(48);e.exports={unavailableTemplate:n.compile(o(442)),authUnavailableTemplate:n.compile(o(443)),termsAndGuidelinesTemplate:n.compile(o(444)),clearLine:n.compile(o(445)),commentingSettingsLink:n.compile(o(446)),environmentDisplay:n.compile(o(447))}},108:function(e,t,o){"use strict";t.toDOM=function(e){var t=document,o=void 0,n=t.createElement("div"),i=t.createDocumentFragment();for(n.innerHTML=e;n.firstChild;)o=n.firstChild,i.appendChild(o);return i},t.getComputedStyle=function(e,t){return window.getComputedStyle?(t="boolean"==typeof t&&t,window.getComputedStyle(e,t)):{getPropertyValue:function(t){var o=/(\-([a-zA-Z]){1})/g;return"float"===t&&(t="styleFloat"),o.test(t)&&(t=t.replace(o,function(){return arguments[2].toUpperCase()})),e.currentStyle[t]?e.currentStyle[t]:null}}},t.windowSize=function(){var e=window,t=document,o=t.documentElement,n=t.getElementsByTagName("body")[0];return{width:e.innerWidth||n.clientWidth||o.clientWidth,height:e.innerHeight||n.clientHeight||o.clientHeight}}},109:function(e,t,o){"use strict";var n=o(1),i=o(36),r=o(20);t.loadLivefyreCore=function(){var e={loaded:!1,status:"",inProgress:!1,event:new n.Events};return function(t){"function"!=typeof t&&(t=function(){}),!0===e.loaded?"success"===e.status?t():t(e.error):(e.event.on("done",function(){"success"===e.status?t():t(e.error)}),e.inProgress||(e.inProgress=!0,n.scriptLoader({url:i.get().livefyre.resourceDomainBase+i.get().resourceUrls.livefyreJs,cache:!0},function(t){return t?(e.loaded=!0,e.status="error",e.error=t,e.event.trigger("done"),void r.trigger("error.livefyreJs",e.error)):"undefined"==typeof Livefyre?(e.loaded=!0,e.status="error",e.error=new Error("Livefyre core JS Script not loaded."),e.event.trigger("done"),void r.trigger("error.livefyreJs",e.error)):(e.loaded=!0,e.status="success",void e.event.trigger("done"))})))}}()},16:function(e,t,o){"use strict";var n=o(5),i=o(1);t.getAuth=function(){var e=i.ftUser.getSession();if(e){var t=i.storageWrapper.sessionStorage.getItem(n.get().cacheConfig.authBaseName+e);if(t){if(new Date<i.dateHelper.toDateObject(t.expires))return t;i.storageWrapper.sessionStorage.removeItem(n.get().cacheConfig.authBaseName+e)}}},t.removeAuth=function(){var e=i.ftUser.getSession();e&&i.storageWrapper.sessionStorage.removeItem(n.get().cacheConfig.authBaseName+e)},t.cacheAuth=function(e){var t=i.ftUser.getSession();if(!t)return!1;if(e.token)try{var o={};i.storageWrapper.sessionStorage.hasItem(n.get().cacheConfig.authBaseName+t)&&(o=i.storageWrapper.sessionStorage.getItem(n.get().cacheConfig.authBaseName+t));var r=i.merge({},o,e);return i.storageWrapper.sessionStorage.setItem(n.get().cacheConfig.authBaseName+t,r),!0}catch(o){i.logger.debug("Failed to save to the storage.","authObject:",e,"sessionId:",t,"Error:",o)}return!1},t.getInit=function(e){return i.storageWrapper.sessionStorage.getItem(n.get().cacheConfig.initBaseName+e)},t.cacheInit=function(e,t){try{return i.storageWrapper.sessionStorage.setItem(n.get().cacheConfig.initBaseName+e,t),!0}catch(o){i.logger.debug("Failed to save to the storage.","articleId:",e,"initObj:",t,"Error:",o)}return!1},t.removeInit=function(e){i.storageWrapper.sessionStorage.removeItem(n.get().cacheConfig.initBaseName+e)},t.clearAuth=function(){if(i.storageWrapper.sessionStorage.native)for(var e in i.storageWrapper.sessionStorage.native)if(i.storageWrapper.sessionStorage.hasItem(e)){var t=e.match(new RegExp(n.get().cacheConfig.authBaseName+"(.*)"));t&&t.length&&i.storageWrapper.sessionStorage.removeItem(e)}},t.clearLivefyreInit=function(){if(i.storageWrapper.sessionStorage.native)for(var e in i.storageWrapper.sessionStorage.native)if(i.storageWrapper.sessionStorage.hasItem(e)){var t=e.match(new RegExp(n.get().cacheConfig.initBaseName+"(.*)"));t&&t.length&&i.storageWrapper.sessionStorage.removeItem(e)}},t.clear=function(){t.clearAuth(),t.clearInit()}},166:function(e,t,o){"use strict";function n(e){var t=this;this.widgetContainer=void 0;try{if("string"==typeof e){if(!document.querySelectorAll(e).length)throw new Error("Selector not valid or does not exists.");this.widgetContainer=e[0]}else(window.HTMLElement&&e instanceof window.HTMLElement||window.Element&&e instanceof window.Element)&&(this.widgetContainer=e)}catch(e){this.widgetContainer=document.body}this.scrollToWidget=function(e){var o=!1;window.scrollTo(0,t.widgetContainer.offsetTop),function(){o||(o=!0,"function"==typeof e&&e())}()},this.addNotAvailableMessage=function(){t.widgetContainer.innerHTML=r.unavailableTemplate.render({message:i.texts.unavailable})},this.hideTermsAndGuidelinesMessage=function(){var e=t.widgetContainer.querySelector(".o-comment-ui--terms-message");e&&(e.style.display="none")},this.showTermsAndGuidelinesMessage=function(){var e=t.widgetContainer.querySelector(".o-comment-ui--terms-message");e&&(e.style.display="block")},this.clearContainer=function(){t.widgetContainer.innerHTML=""},this.showEnvironment=function(e){t.widgetContainer.insertBefore(s.toDOM(r.environmentDisplay.render({envName:e})),t.widgetContainer.firstChild)},this.addTermsAndGuidelineMessage=void 0,this.makeReadOnly=void 0,this.hideSignInLink=void 0,this.addAuthNotAvailableMessage=void 0,this.addSettingsLink=void 0,this.destroy=function(){t.widgetContainer&&(t.widgetContainer.parentNode.removeChild(t.widgetContainer),t.widgetContainer=null)}}var i=o(167),r=o(107),s=o(108);n.__extend=function(e){if("function"==typeof Object.create)e.prototype=Object.create(n.prototype),e.prototype=Object.create(n.prototype);else{var t=function(){};t.prototype=n.prototype,e.prototype=new t,e.prototype.constructor=e}},e.exports=n},167:function(e,t,o){"use strict";t.texts={unavailable:"It seems we're having a problem loading comments for you. Apologies. Hopefully it's temporary, but if you continue to experience this difficulty, please contact <a href=\"mailto:help@ft.com\">help@ft.com</a>.",changePseudonymError:"System is temporarily unavailable, please try again later.",changePseudonymBlankError:"Pseudonym is blank.",genericError:"System is temporarily unavailable, please try again later.",commentingSettingsLabel:"Commenting settings"},t.serviceMessageOverrides={"User session is not valid.":'You are not currently signed in to FT.com, please <a href="https://accounts.ft.com/login?location='+encodeURIComponent(document.location.href)+'">sign in</a> to create a pseudonym',"User profile (.*) does not have permission to access the desired action.":"You don't have permission to perform this action.","Commenting is closed for conversation=([0-9]+)":"This conversation is closed to new comments."},t.serviceCodeMessages={401:"You are not authorized for this action.",403:"You are not authorized for this action.",404:"The resource was not found."}},168:function(e,t,o){"use strict";t.lfStringOverride={featuredCommentsTitlePlural:"Editor's picks",showMore:"Show more comments",likeButton:"Recommend",unlikeButton:"Unrecommend",sortHotThreads:"Active discussions",sortBackButton:"Back to active discussions",sortTopComments:"Most recommended",moderator:"Moderator",postButton:"Submit Comment",postAsButton:"Submit Comment",postReplyButton:"Submit Comment",postReplyAsButton:"Submit Comment",topCommentsContentNotFoundMsg:"There aren't any recommendations yet.",errorLikeOwnComment:"You cannot recommend your own comment",shareDefaultText:"Read %s's comment on FT.com",commentTombstone:"This comment has been removed",flagButton:"Report",flagCommentTooltip:"Report",flagConfirmationMessage:"Report %s's comment as %s?",flagSubtitle:"Report as",flagSuccessMsg:"Comment has been reported.",flagTitle:"Report %s's comment",commentCountLabel:"COMMENTS (%s)",commentCountLabelPlural:"COMMENTS (%s)",editorDisabled:"This conversation is closed to new comments."}},20:function(e,t,o){"use strict";var n=function(e,t,o){document.body.addEventListener(t+"."+e,o)};t.on=function(e,t,o){"function"==typeof t&&(o=t,t="oComments"),t||(t="oComments"),document.body?n(e,t,o):document.addEventListener("o.DOMContentLoaded",function(){n(e,t,o)})};var i=function(e,t,o){document.body.removeEventListener(t+"."+e,o)};t.off=function(e,t,o){"function"==typeof t&&(o=t,t="oComments"),t||(t="oComments"),document.body?i(e,t,o):document.addEventListener("o.DOMContentLoaded",function(){i(e,t,o)})};var r=function(e,t,o){document.body.dispatchEvent(new CustomEvent(t+"."+e,{detail:o,bubbles:!0}))};t.trigger=function(e,t,o){void 0===o&&(o=t,t="oComments"),t||(t="oComments"),document.body?r(e,t,o):document.addEventListener("o.DOMContentLoaded",function(){r(e,t,o)})}},27:function(e,t,o){"use strict";function n(e){for(var t=arguments.length,o=n,i=void 0,r=void 0,s=void 0,a=1;a<t;a++){i=arguments[a];for(r in i)i.hasOwnProperty(r)&&null!==(s=i[r])&&void 0!==s&&(void 0===e[r]?e[r]=s:e[r].constructor!==Object?e[r]=s:s.constructor!==Object?e[r]=s:o(e[r],s))}return e}e.exports=n},28:function(e,t,o){"use strict";function n(e,t){var o=void 0,n=void 0,s=void 0,a=void 0,l=void 0,c=void 0;if("function"!=typeof t)throw"Callback not specified";if("string"==typeof e)l=e;else{if(!e||"object"!==(void 0===e?"undefined":i(e)))return void t(new Error("Configuration not specified or has the wrong type."));if(!e.url)return void t(new Error("URL is not specified"));l=e.url,e.charset&&(c=e.charset)}n=!1,s=function(e){n||(n=!0,t(e||new Error("Timeout")))},a=function(){n||(n=!0,t(null))},o=document.createElement("script"),o.async=!0,c&&(o.charset=c),o.src=l;var u=function(){o&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),o=null)};o.onload=o.onreadystatechange=function(e,t){if(t||!o.readyState||/loaded|complete/.test(o.readyState)){if(u(),t)return void s(new Error("Aborted."));a()}},o.onerror=function(){u(),s(new Error("Error loading script."))},r.insertBefore(o,r.firstChild)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=document.head||document.getElementsByTagName("head")[0];e.exports=n},29:function(e,t,o){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=!1;if("undefined"!=typeof Storage)try{localStorage.setItem("test",2),localStorage.removeItem("test",2),i=!0}catch(e){}var r=null;r=i?function(e){var t=void 0;if("local"===e||"localStorage"===e)t=localStorage;else{if("session"!==e&&"sessionStorage"!==e)throw"Not valid storage type selected";t=sessionStorage}this.setItem=function(e,o){var i=void 0,r=void 0;switch(void 0===o?"undefined":n(o)){case"string":case"boolean":i=o;break;case"number":r=parseFloat(o)===parseInt(o,10)?"int":"float",i=o.toString();break;case"array":case"object":if(o instanceof Date)r="date",i=o.getTime();else try{i=JSON.stringify(o),r="json"}catch(e){i=o.toString(),r="object"}break;default:r="unknown",i=o}i=(void 0!==r?r:void 0===o?"undefined":n(o))+"|"+i,t.setItem(e,i)},this.getItem=function(e){var o=void 0,n=t.getItem(e);if(n)switch(o=n.substr(0,n.indexOf("|")),n=n.substr(n.indexOf("|")+1),o){case"string":return n;case"boolean":if("true"===n)return!0;if("false"===n)return!1;return;case"date":return new Date(n);case"int":return parseInt(n,10);case"float":return parseFloat(n);case"json":return JSON.parse(n);case"object":default:return n}},this.hasItem=function(e){return!!t.getItem(e)},this.removeItem=function(e){t.removeItem(e)},this.clear=function(){t.clear()},this.native=t,this.destroy=function(){}}:function(){this.setItem=function(){return!1},this.getItem=function(){},this.hasItem=function(){return!1},this.removeItem=function(){return!1},this.clear=function(){return!1},this.native=void 0,this.destroy=function(){}},e.exports=r},30:function(e,t,o){"use strict";var n=function(){for(var e="",t="abcdefghijklmnopqrstuvwxyz",o=10*(Math.random()+1),n=0;n<o;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e};e.exports=n},31:function(e,t,o){"use strict";t.set=function(e,t,o){var n=void 0;if(o){var i=new Date;i.setTime(i.getTime()+24*o*60*60*1e3),n="; expires="+i.toGMTString()}else n="";document.cookie=e+"="+t+n+"; path=/"},t.get=function(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var i=o[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},t.remove=function(e){t.set(e,"",-1)}},32:function(e,t,o){"use strict";function n(e,t){function o(){if(!f){var t=new Date,n=0,r=!1,s="//"+c.get().livefyre.networkName+".stream1.fyre.co/v3.0/collection/"+e+"/"+i+"/",d=setTimeout(function(){r=!0,u.debug("oCommentApi","stream","backup restart"),m({force:!0})},3e4),m=function(e){e=e||{},u.debug("oCommentApi","stream","restart"),clearTimeout(d),r&&!0!==e.force||(r=!0,n=1e4-(new Date-t),setTimeout(function(){!0===e.report&&a.emit("streamingEvent",{eventType:"info",message:"connection restored"}),o()},n<0?0:n))};try{l.get(s,{success:function(e){try{if(!0===e.timeout)return u.debug("oCommentApi","stream","success, timeout"),void m();e.data&&v(e.data),r||(clearTimeout(d),i=e.data&&e.data.maxEventId?e.data.maxEventId:i,setTimeout(function(){u.debug("oCommentApi","stream","success, new call"),o()},0))}catch(e){a.emit("streamingEvent",{eventType:"error",message:"connection dropped",error:e}),u.debug("oCommentApi","stream","exception",e),m({report:!0})}},error:function(e){a.emit("streamingEvent",{eventType:"error",message:"connection dropped",error:e}),u.debug("oCommentApi","stream","error",e),m({report:!0})},timeout:function(){u.debug("oCommentApi","stream","timeout"),m()}})}catch(e){a.emit("streamingEvent",{eventType:"error",message:"connection dropped",error:e}),u.debug("oCommentApi","stream","exception",e),m({report:!0})}}}var n=[],i=void 0,r=[],s=!1,f=!1;t.callbacks&&t.callbacks instanceof Array&&(n=t.callbacks),t.callback&&"function"==typeof t.callback&&n.push(t.callback),void 0!==t.lastEventId&&(i=t.lastEventId);var m=function(){var e=void 0,t=arguments;for(e=0;e<n.length;e++)!function(e){setTimeout(function(){e.apply(this,t)})}(n[e])},p=function(e,t){-1===r.indexOf(e.content.id)&&r.push(e.content.id),m({comment:{parentId:e.content.parentId||null,author:t?{displayName:t.displayName,tags:t.tags,type:t.type}:null,content:e.content.bodyHtml||null,timestamp:e.content.createdAt||null,commentId:e.content.id||null,visibility:e.vis}})},g=function(e,t){m({comment:{updated:!0,parentId:e.content.parentId||null,author:t?{displayName:t.displayName,tags:t.tags,type:t.type}:null,content:e.content.bodyHtml||null,timestamp:e.content.createdAt||null,commentId:e.content.id||null,visibility:e.vis,lastVisibility:e.lastVis}})},h=function(e){m({comment:{deleted:!0,commentId:e.content.id}})},y=function(e){m({collection:{commentsEnabled:e.value}})},v=function(e){if(e.states){var t=e.states;for(var o in t)if(t.hasOwnProperty(o)){var n=t[o];0===n.type&&(n.vis>=1?n.content.updatedBy||-1!==r.indexOf(n.content.id)?g(n,e.authors&&n.content.authorId?e.authors[n.content.authorId]:null):p(n,e.authors&&n.content.authorId?e.authors[n.content.authorId]:null):0===n.vis&&h(n))}}if(e.settings&&e.settings.length){var i=0,s=void 0;for(i=0;i<e.settings.length;i++)s=e.settings[i],"commentsEnabled"===s.name&&y(s)}};this.addCallback=function(e){e&&"function"==typeof e&&n.push(e)},this.removeCallback=function(e){e&&"function"==typeof e&&-1!==n.indexOf(e)&&n.splice(n.indexOf(e),1),0===n.length&&this.destroy()},this.setLastEventId=function(e){i=e},this.init=function(){return!(s||f||void 0===i||void 0===e||!n.length)&&(s=!0,o(),!0)},this.destroy=function(){n=null,i=null,void 0!==d[e]&&(d[e]=void 0),f=!0}}function i(e,t){var o=void 0,i=0;if(e){if("function"==typeof t)o=t;else{if("object"!==(void 0===t?"undefined":s(t)))return!1;if("function"!=typeof t.callback)return!1;o=t.callback,t.lastEventId&&(i=t.lastEventId)}return d[e]?(d[e].addCallback(o),!0):(d[e]=new n(e,{lastEventId:i,callback:o}),d[e].init(),!0)}}function r(e,t){var o=void 0;e&&("function"==typeof t?o=t:"function"==typeof t.callback&&(o=t.callback),d[e]&&(o?d[e].removeCallback(o):d[e].destroy()))}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=o(95),l=o(96),c=o(5),u=o(1).logger,d={};e.exports={create:i,destroy:r}},36:function(e,t,o){"use strict";var n=o(1).EnvConfig;e.exports=new n},37:function(e,t,o){"use strict";function n(e){function t(){var t=void 0,s=void 0,g=void 0;if(r=document.createElement("div"),r.className="o-comment-ui--overlay-content",n=document.createElement("form"),n.setAttribute("name",e.name||""),n.setAttribute("method",e.method||""),n.setAttribute("action",e.action||""),r.appendChild(n),n.appendChild(a.toDOM(c.render())),e.items&&e.items.length)for(g=0;g<e.items.length;g++)t=e.items[g],"object"===(void 0===t?"undefined":i(t))&&"function"==typeof l[t.type]?n.appendChild(a.toDOM(l[t.type].call(o,t))):"string"==typeof t&&n.appendChild(a.toDOM(t));if(e.buttons&&e.buttons.length){n.appendChild(a.toDOM(u.render()));var h=n.querySelector(".o-comment-ui--overlay-button-container");for(g=0;g<e.buttons.length;g++)switch(s=e.buttons[g],s.type){case"button":void 0!==s.label&&s.label&&h.appendChild(a.toDOM(d.render({type:"button",label:s.label})));break;case"submitButton":h.appendChild(a.toDOM(d.render({type:"submit",label:s.label?s.label:"Submit"})));break;case"cancelButton":h.appendChild(a.toDOM(f.render({label:s.label?s.label:"cancel"})));break;case"dismiss":void 0!==s.label&&s.label&&h.appendChild(a.toDOM(m.render({label:s.label})));break;default:throw new Error("A button of type: "+s.type+" has been passed but is not expected.")}n.appendChild(a.toDOM(p.render()));for(var y=n.querySelectorAll(".o-comment-ui--cancel-button"),v=function(){r.dispatchEvent(new CustomEvent("oCommentUi.form.cancel",{bubbles:!0}))},b=0;b<y.length;b++)y[b].addEventListener("click",v)}}if(!e||"object"!==(void 0===e?"undefined":i(e)))throw new Error("Configuration missing or invalid.");var o=this,n=void 0,r=void 0;t.call(this),this.getContainerDomElement=function(){return r},this.getDomElement=this.getContainerDomElement,this.getFormDomElement=function(){return n},this.serialize=function(){return g(n)},this.showError=function(e){var t=n.querySelector(".o-comment-ui--overlay-error-message");t&&(t.innerHTML=e)},this.clearError=function(){var e=n.querySelector(".o-comment-ui--overlay-error-message");e&&(e.innerHTML="")};var s=function(e){for(var t=0;t<e.length;t++)e[t].setAttribute("disabled","disabled")};this.disableButtons=function(){var e=n.querySelectorAll("button"),t=n.querySelectorAll("input[type=button]"),o=n.querySelectorAll("input[type=submit]");s(e),s(t),s(o)};var h=function(e){for(var t=0;t<e.length;t++)e[t].removeAttribute("disabled")};this.enableButtons=function(){var e=n.querySelectorAll("button"),t=n.querySelectorAll("input[type=button]"),o=n.querySelectorAll("input[type=submit]");h(e),h(t),h(o)},this.destroy=function(){n=null,o=null}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=o(48),s=o(107),a=o(108),l=o(450),c=r.compile(o(456)),u=r.compile(o(457)),d=r.compile(o(458)),f=r.compile(o(459)),m=r.compile(o(460)),p=s.clearLine,g=function(e){var t=void 0,o={},n=void 0,r=void 0;if("object"===(void 0===e?"undefined":i(e))&&"FORM"===e.nodeName)for(n=e.elements.length-1;n>=0;n--)if(t=e.elements[n],t.name&&"file"!==t.type&&"reset"!==t.type&&!t.hasAttribute("disabled"))if("select-multiple"===t.type)for(r=e.elements[n].options.length-1;r>=0;r--)t.options[r].selected&&(o[t.name]=t.options[r].value);else"submit"!==t.type&&"button"!==t.type&&("checkbox"!==t.type&&"radio"!==t.type||t.checked)&&(o[t.name]=t.value);return o};e.exports=n},4:function(e,t){e.exports=window.FT.nUi._hiddenComponents.oViewport},434:function(e,t,o){"use strict";var n=o(435),i=function(e){return e&&e.__esModule?e:{default:e}}(n),r=document.querySelector("article[data-content-id]").getAttribute("data-content-id");i.default.on("widget.renderComplete",function(){var e=document.querySelector("[data-skeleton=comments]");e.parentNode.removeChild(e)}),new i.default(document.querySelector("#comments"),{title:document.title,url:"https://ft.com/content/"+r,articleId:r,livefyre:{initialNumVisible:10,disableIE8Shim:!0,disableThirdPartyAnalytics:!0}})},435:function(e,t,o){"use strict";var n=o(20),i=o(36),r=o(10),s=o(436),a=o(1),l=o(437),c=o(109);i.set(s),r.setConfig("cache",!0),e.exports=l,e.exports.setConfig=function(){i.set.apply(this,arguments)},e.exports.init=function(t){return a.initDomConstruct({context:t,classNamespace:"o-comments",eventNamespace:"oComments",module:e.exports})},e.exports.utilities=a,e.exports.dataService=r,e.exports.utils=o(49),e.exports.i18n=o(168),e.exports.userDialogs=o(105),e.exports.auth=o(104),e.exports.enableLogging=function(){a.logger.enable.apply(this,arguments)},e.exports.disableLogging=function(){a.logger.disable.apply(this,arguments)},e.exports.setLoggingLevel=function(){a.logger.setLevel.apply(this,arguments)},e.exports.on=n.on,e.exports.off=n.off,document.addEventListener("o.DOMContentLoaded",function(){try{var t=document.querySelector('script[type="application/json"][data-o-comments-config]');if(t){var o=JSON.parse(t.innerHTML);e.exports.setConfig(o)}}catch(e){a.logger.log("Invalid config in the DOM.",e)}a.initDomConstruct({classNamespace:"o-comments",eventNamespace:"oComments",module:e.exports,auto:!0})}),c.loadLivefyreCore(function(e){e||Livefyre.on("beforeLoadPermalinks",function(e){e.disableModal()})})},436:function(e,t,o){"use strict";e.exports={loginUrl:"https://accounts.ft.com/login",livefyre:{network:"ft.fyre.co",domain:"ft.auth.fyre.co",resourceDomainBase:"//cdn.livefyre.com/"},resourceUrls:{livefyreJs:"Livefyre.js"},emailNotifications:!0}},437:function(e,t,o){"use strict";function n(){function e(){var e=function(){p.api.getAuth(function(e,t){!e&&t&&u.showSettingsDialog(t,function(e,t){e||t&&t.token&&c.logger.debug("new settings",t)})})},t=function(){p.api.getAuth(function(e,t){!e&&t&&u.showChangePseudonymDialog(t.displayName,function(e,t){e||t&&t.token&&c.logger.debug("new settings",t)})})},o=w(function(){!0!==s.get().emailNotifications?t():e()});y.ui.addSettingsLink({onClick:function(){r.loginRequired(function(e){e||o()})}})}function t(){y.ui.removeSettingsLink()}function o(e,t){p.api.stream.create(e,{lastEventId:t,callback:n})}function n(e){e.comment&&(2===e.comment.visibility?y.ui.showCommentBanned(e.comment.commentId):2!==e.comment.lastVisibility&&!0!==e.comment.deleted||y.ui.removeCommentBanned(e.comment.commentId))}m.Widget.apply(this,arguments);var y=this;if(this.config){this.forceMode=!1,this.config.stream_type=this.config.stream_type||"livecomments",this.config.layout=this.config.layout||"main",this.config.hideDeleteEnabled=!1!==this.config.hideDeleteEnabled,this.config.hideDeleteInterval=this.config.hideDeleteInterval||2880,this.config.livefyre&&"object"===i(this.config.livefyre)||(this.config.livefyre={}),this.config.livefyre.editorCss=this.config.livefyre.editorCss||"p { margin-bottom: 10px !important; }",this.config.livefyre.disableAvatars="boolean"!=typeof this.config.livefyre.disableAvatars||this.config.livefyre.disableAvatars,this.config.livefyre.disableIE8Shim="boolean"!=typeof this.config.livefyre.disableIE8Shim||this.config.livefyre.disableIE8Shim,this.config.livefyre.disableThirdPartyAnalytics="boolean"!=typeof this.config.livefyre.disableThirdPartyAnalytics||this.config.livefyre.disableThirdPartyAnalytics,this.config.livefyre.replyShowMoreInitial=this.config.livefyre.replyShowMoreInitial?parseInt(this.config.livefyre.replyShowMoreInitial,10):3,-1===this.getWidgetEl().className.indexOf("o-comments")&&(this.getWidgetEl().className+=" o-comments"),-1===this.getWidgetEl().className.indexOf("o-comments--lf-overrides")&&(this.getWidgetEl().className+=" o-comments--lf-overrides"),-1===this.getWidgetEl().className.indexOf("o-comments--comment-type-"+y.config.stream_type)&&(this.getWidgetEl().className+=" o-comments--comment-type-"+y.config.stream_type),this.config.layout&&(this.getWidgetEl().className+=" o-comments--comment-layout-"+this.config.layout),this.getWidgetEl().setAttribute("data-o-comments-built","true"),this.config.stringOverrides=this.config.stringOverrides||{},this.ui=new a(this.getWidgetEl(),{layout:this.config.layout,stream_type:this.config.stream_type});var v=y.config.stringOverrides?c.merge({},d.lfStringOverride,y.config.stringOverrides):d.lfStringOverride;y.config.stringOverrides=v;var b=!1;l.isLivefyreActionQueuePresent()&&(c.logger.log("Force flag set."),this.forceMode=!0);var w=function(e){return function(){b||e.apply(this,arguments)}};this.loadInitData=function(e){var t={title:y.config.title,url:y.config.url,articleId:y.config.articleId,elId:y.config.elId,stream_type:y.config.stream_type};void 0!==y.config.section&&(t.section=y.config.section),void 0!==y.config.tags&&(t.tags=y.config.tags),p.api.getLivefyreInitConfig(t,w(function(t,o){if(t)return void e(t);e(null,o)}))},this.render=function(e,t){e&&!b&&(!0!==e.unclassifiedArticle&&!0!==e.notAllowedToCreateCollection?g.loadLivefyreCore(w(function(n){if(n)return y.trigger("error.widget",n),void y.onError(n);y.trigger("widget.ready");var a=void 0;for(a in y.config.livefyre)y.config.livefyre.hasOwnProperty(a)&&(e[a]=y.config.livefyre[a]);(!0===y.config.authPageReload||y.config.livefyre.authPageReload)&&(e.authPageReload=!0,r.authPageReload=!0);var l={network:s.get().livefyre.network};y.config.stringOverrides&&(l.strings=y.config.stringOverrides),Livefyre.require(["fyre.conv#3","auth"],w(function(n,a){a.delegate(r.getAuthDelegate()),y.ui.clearContainer(),c.logger.debug("initData passed to Livefyre",e),new n(l,[e],w(function(n){if(n){t(),y.lfWidget=n,y.trigger("widget.load",{lfWidget:n}),h.trackSuccessLoad(),n.on("initialRenderComplete",w(function(){var e=y.lfWidget.getCollection().attributes;o(e.id,e.event),y.ui.addTermsAndGuidelineMessage(),y.config.hideDeleteEnabled&&(y.ui.hideDeleteButtons(y.config.hideDeleteInterval),y.ui.onNewCommentVisible(function(){y.ui.hideDeleteButtons(y.config.hideDeleteInterval)}),setInterval(function(){y.ui.hideDeleteButtons(y.config.hideDeleteInterval)},1e4)),!0!==s.get().emailNotifications&&y.ui.hideFollowButton(),"side"!==y.config.layout&&y.ui.moveCommentCountOut(),!0===s.get().showEnvironment&&y.ui.showEnvironment(s.get().livefyre.network),r.login(function(e,t){t||(t=null),y.trigger("data.auth",t),e?!0===y.forceMode&&setTimeout(y.ui.scrollToWidget,2e3):(r.logout(),t&&(!1===t.pseudonym?(!0===y.forceMode&&r.loginRequiredPseudonymMissing(null,!0),y.ui.hideSignInLink()):!1===t.serviceUp&&(y.ui.makeReadOnly(),y.ui.hideSignInLink(),y.ui.addAuthNotAvailableMessage(),y.ui.hideTermsAndGuidelinesMessage())))}),y.trigger("widget.renderComplete")}));var a=parseInt(e.siteId,10);n.on("commentPosted",w(function(e){r.pseudonymWasMissing?r.pseudonymWasMissing=!1:p.api.getAuth(function(e,t){if(e)return void(t=null);!1!==y.config.emailAlert&&!0===s.get().emailNotifications&&t&&"object"===(void 0===t?"undefined":i(t))&&t.token&&!t.settings&&u.showEmailAlertDialog()}),y.trigger("tracking.postComment",{siteId:a,lfEventData:e}),h.trackPost(a,e.parent),!0===e.sharedToFacebook?h.trackShare(a,"facebook"):!0===e.sharedToTwitter&&h.trackShare(a,"twitter")})),n.on("commentLiked",w(function(e){y.trigger("tracking.likeComment",{siteId:a,lfEventData:e}),h.trackLike(a)})),n.on("commentShared",w(function(e){y.trigger("tracking.shareComment",{siteId:a,lfEventData:e}),!0===e.sharedToFacebook&&h.trackShare(a,"facebook"),!0===e.sharedToTwitter&&h.trackShare(a,"twitter")})),n.on("socialMention",w(function(e){y.trigger("tracking.socialMention",{siteId:a,lfEventData:e}),h.trackLike(a,e.provider)}))}}))}))})):!0===e.unclassifiedArticle?t({unclassifiedArticle:!0}):!0===e.notAllowedToCreateCollection&&t({notAllowedToCreateCollection:!0}))},this.onError=function(e){y.ui.clearContainer(),"object"===(void 0===e?"undefined":i(e))&&!0!==e.unclassifiedArticle&&!0!==e.notAllowedToCreateCollection&&y.ui.addNotAvailableMessage()};var S=!1;this.on("error.widget",function(e){var t=e.detail.data;(!t||t.unclassifiedArticle||t.notAllowedToCreateCollection)&&t||S||(S=!0,"undefined"==typeof Livefyre?h.trackLivefyreDown():h.trackSudsDown())}),this.on("error.init",function(){S||(S=!0,h.trackSudsDown())}),f.on("auth.login",e),f.on("auth.logout",t);var C=this.destroy;this.destroy=function(){b=!0,y.forceMode=null,y.lfWidget&&y.lfWidget.getCollection().attributes&&p.api.stream.destroy(y.lfWidget.getCollection().attributes.id,{callback:n}),y.lfWidget=null,f.off("auth.login",e),f.off("auth.logout",t),C(),C=null,y=null},!1!==this.config.autoInit&&this.init()}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=o(104),s=o(36),a=o(465),l=o(49),c=o(1),u=o(105),d=o(168),f=o(20),m=o(106),p=o(10),g=o(109),h=o(467);m.Widget.__extend(n,"oComments","o-comments"),n.__extend=function(e,t,o){if("function"==typeof Object.create)e.prototype=Object.create(n.prototype);else{var i=function(){};i.prototype=n.prototype,e.prototype=new i,e.prototype.constructor=e}t&&(e.prototype.eventNamespace=t),o&&(e.prototype.classNamespace=o)},e.exports=n},438:function(e,t,o){"use strict";function n(e,t){var o=void 0,n=void 0;n=this;try{e?e instanceof HTMLElement||(e=document.querySelector(e)):e=document.body}catch(t){var s=void 0;"string"==typeof e&&(s=document.querySelector(e)),e=s||document.body}if(e.setAttribute("data-"+n.classNamespace+"-js",""),o=e,o.id||(o.id=n.eventNamespace+"-"+i.generateId()),t.elId=o.id,t){if(!t.articleId){if(!t.articleid)return;t.articleId=t.articleid}t.url&&t.title&&(t.timeout=t.timeout||15,this.config=t,this.ui=new r(o),this.getWidgetEl=function(){return o},this.on=function(e,t){o.addEventListener(n.eventNamespace+"."+e,t)},this.off=function(e,t){o.removeEventListener(n.eventNamespace+"."+e,t)},this.trigger=function(e,i){var r={data:i,instance:n,id:t.elId};o.dispatchEvent(new CustomEvent(n.eventNamespace+"."+e,{detail:r,bubbles:!0}))},this.loadInitData=function(e){e(new Error("Not implemented"))},this.onTimeout=function(){n.ui.clearContainer(),n.ui.addNotAvailableMessage()},this.onError=function(){n.ui.clearContainer(),n.ui.addNotAvailableMessage()},this.destroy=function(){n.config=null,n.ui.destroy(),n.ui=null,o=null,n=null})}}var i=o(1),r=o(166);n.prototype.initCalled=!1,n.prototype.init=function(){var e=this;if(this.config&&!this.initCalled){this.initCalled=!0;var t=void 0;this.config.timeout>0&&(t=setTimeout(function(){e.trigger("widget.timeout"),e.onTimeout()},1e3*this.config.timeout)),e.loadInitData(function(o,n){if(o)return e.trigger("error.init",o.error),e.trigger("error.widget",o.error),e.onError(o),void clearTimeout(t);n&&(e.trigger("data.init",n),e.render(n,function(o){if(o)return e.trigger("error.widget",o),e.onError(o),void clearTimeout(t);clearTimeout(t)}))})}},n.prototype.eventNamespace="oCommentUi",n.prototype.classNamespace="o-comment-ui",n.__extend=function(e,t,o){if("function"==typeof Object.create)e.prototype=Object.create(n.prototype);else{var i=function(){};i.prototype=n.prototype,e.prototype=new i,e.prototype.constructor=e}t&&(e.prototype.eventNamespace=t),o&&(e.prototype.classNamespace=o)},e.exports=n},439:function(e,t,o){"use strict";var n=o(440);n.Template=o(441).Template,n.template=n.Template,e.exports=n},440:function(e,t,o){"use strict";!function(e){function t(e){"}"===e.n.substr(e.n.length-1)&&(e.n=e.n.substring(0,e.n.length-1))}function o(e){return e.trim?e.trim():e.replace(/^\s*|\s*$/g,"")}function n(e,t,o){if(t.charAt(o)!=e.charAt(0))return!1;for(var n=1,i=e.length;n<i;n++)if(t.charAt(o+n)!=e.charAt(n))return!1;return!0}function i(t,o,n,a){var l=[],c=null,u=null,d=null;for(u=n[n.length-1];t.length>0;){if(d=t.shift(),u&&"<"==u.tag&&!(d.tag in S))throw new Error("Illegal content in < super tag.");if(e.tags[d.tag]<=e.tags.$||r(d,a))n.push(d),d.nodes=i(t,d.tag,n,a);else{if("/"==d.tag){if(0===n.length)throw new Error("Closing tag without opener: /"+d.n);if(c=n.pop(),d.n!=c.n&&!s(d.n,c.n,a))throw new Error("Nesting error: "+c.n+" vs. "+d.n);return c.end=d.i,l}"\n"==d.tag&&(d.last=0==t.length||"\n"==t[0].tag)}l.push(d)}if(n.length>0)throw new Error("missing closing tag: "+n.pop().n);return l}function r(e,t){for(var o=0,n=t.length;o<n;o++)if(t[o].o==e.n)return e.tag="#",!0}function s(e,t,o){for(var n=0,i=o.length;n<i;n++)if(o[n].c==e&&o[n].o==t)return!0}function a(e){var t=[];for(var o in e)t.push('"'+c(o)+'": function(c,p,t,i) {'+e[o]+"}");return"{ "+t.join(",")+" }"}function l(e){var t=[];for(var o in e.partials)t.push('"'+c(o)+'":{name:"'+c(e.partials[o].name)+'", '+l(e.partials[o])+"}");return"partials: {"+t.join(",")+"}, subs: "+a(e.subs)}function c(e){return e.replace(v,"\\\\").replace(g,'\\"').replace(h,"\\n").replace(y,"\\r").replace(b,"\\u2028").replace(w,"\\u2029")}function u(e){return~e.indexOf(".")?"d":"f"}function d(e,t){var o="<"+(t.prefix||""),n=o+e.n+C++;return t.partials[n]={name:e.n,partials:{}},t.code+='t.b(t.rp("'+c(n)+'",c,p,"'+(e.indent||"")+'"));',n}function f(e,t){t.code+="t.b(t.t(t."+u(e.n)+'("'+c(e.n)+'",c,p,0)));'}function m(e){return"t.b("+e+");"}var p=/\S/,g=/\"/g,h=/\n/g,y=/\r/g,v=/\\/g,b=/\u2028/,w=/\u2029/;e.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},e.scan=function(i,r){function s(){m.length>0&&(g.push({tag:"_t",text:new String(m)}),m="")}function a(){for(var t=!0,o=v;o<g.length;o++)if(!(t=e.tags[g[o].tag]<e.tags._v||"_t"==g[o].tag&&null===g[o].text.match(p)))return!1;return t}function l(e,t){if(s(),e&&a())for(var o,n=v;n<g.length;n++)g[n].text&&((o=g[n+1])&&">"==o.tag&&(o.indent=g[n].text.toString()),g.splice(n,1));else t||g.push({tag:"\n"});h=!1,v=g.length}var c=i.length,u=0,d=null,f=null,m="",g=[],h=!1,y=0,v=0,b="{{",w="}}";for(r&&(r=r.split(" "),b=r[0],w=r[1]),y=0;y<c;y++)0==u?n(b,i,y)?(--y,s(),u=1):"\n"==i.charAt(y)?l(h):m+=i.charAt(y):1==u?(y+=b.length-1,f=e.tags[i.charAt(y+1)],d=f?i.charAt(y+1):"_v","="==d?(y=function(e,t){var n="="+w,i=e.indexOf(n,t),r=o(e.substring(e.indexOf("=",t)+1,i)).split(" ");return b=r[0],w=r[r.length-1],i+n.length-1}(i,y),u=0):(f&&y++,u=2),h=y):n(w,i,y)?(g.push({tag:d,n:o(m),otag:b,ctag:w,i:"/"==d?h-b.length:y+w.length}),m="",y+=w.length-1,u=0,"{"==d&&("}}"==w?y++:t(g[g.length-1]))):m+=i.charAt(y);return l(h,!0),g};var S={_t:!0,"\n":!0,$:!0,"/":!0};e.stringify=function(t,o,n){return"{code: function (c,p,i) { "+e.wrapMain(t.code)+" },"+l(t)+"}"};var C=0;e.generate=function(t,o,n){C=0;var i={code:"",subs:{},partials:{}};return e.walk(t,i),n.asString?this.stringify(i,o,n):this.makeTemplate(i,o,n)},e.wrapMain=function(e){return'var t=this;t.b(i=i||"");'+e+"return t.fl();"},e.template=e.Template,e.makeTemplate=function(e,t,o){var n=this.makePartials(e);return n.code=new Function("c","p","i",this.wrapMain(e.code)),new this.template(n,t,this,o)},e.makePartials=function(e){var t,o={subs:{},partials:e.partials,name:e.name};for(t in o.partials)o.partials[t]=this.makePartials(o.partials[t]);for(t in e.subs)o.subs[t]=new Function("c","p","t","i",e.subs[t]);return o},e.codegen={"#":function(t,o){o.code+="if(t.s(t."+u(t.n)+'("'+c(t.n)+'",c,p,1),c,p,0,'+t.i+","+t.end+',"'+t.otag+" "+t.ctag+'")){t.rs(c,p,function(c,p,t){',e.walk(t.nodes,o),o.code+="});c.pop();}"},"^":function(t,o){o.code+="if(!t.s(t."+u(t.n)+'("'+c(t.n)+'",c,p,1),c,p,1,0,0,"")){',e.walk(t.nodes,o),o.code+="};"},">":d,"<":function(t,o){var n={partials:{},code:"",subs:{},inPartial:!0};e.walk(t.nodes,n);var i=o.partials[d(t,o)];i.subs=n.subs,i.partials=n.partials},$:function(t,o){var n={subs:{},code:"",partials:o.partials,prefix:t.n};e.walk(t.nodes,n),o.subs[t.n]=n.code,o.inPartial||(o.code+='t.sub("'+c(t.n)+'",c,p,i);')},"\n":function(e,t){t.code+=m('"\\n"'+(e.last?"":" + i"))},_v:function(e,t){t.code+="t.b(t.v(t."+u(e.n)+'("'+c(e.n)+'",c,p,0)));'},_t:function(e,t){t.code+=m('"'+c(e.text)+'"')},"{":f,"&":f},e.walk=function(t,o){for(var n,i=0,r=t.length;i<r;i++)(n=e.codegen[t[i].tag])&&n(t[i],o);return o},e.parse=function(e,t,o){return o=o||{},i(e,"",[],o.sectionTags||[])},e.cache={},e.cacheKey=function(e,t){return[e,!!t.asString,!!t.disableLambda,t.delimiters,!!t.modelGet].join("||")},e.compile=function(t,o){o=o||{};var n=e.cacheKey(t,o),i=this.cache[n];if(i){var r=i.partials;for(var s in r)delete r[s].instance;return i}return i=this.generate(this.parse(this.scan(t,o.delimiters),t,o),t,o),this.cache[n]=i}}(t)},441:function(e,t,o){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(e,t,o){var i;return t&&"object"==(void 0===t?"undefined":n(t))&&(void 0!==t[e]?i=t[e]:o&&t.get&&"function"==typeof t.get&&(i=t.get(e))),i}function o(e,t,o,n,i,r){function s(){}function a(){}s.prototype=e,a.prototype=e.subs;var l,c=new s;c.subs=new a,c.subsText={},c.buf="",n=n||{},c.stackSubs=n,c.subsText=r;for(l in t)n[l]||(n[l]=t[l]);for(l in n)c.subs[l]=n[l];i=i||{},c.stackPartials=i;for(l in o)i[l]||(i[l]=o[l]);for(l in i)c.partials[l]=i[l];return c}function i(e){return String(null===e||void 0===e?"":e)}function r(e){return e=i(e),d.test(e)?e.replace(s,"&amp;").replace(a,"&lt;").replace(l,"&gt;").replace(c,"&#39;").replace(u,"&quot;"):e}e.Template=function(e,t,o,n){e=e||{},this.r=e.code||this.r,this.c=o,this.options=n||{},this.text=t||"",this.partials=e.partials||{},this.subs=e.subs||{},this.buf=""},e.Template.prototype={r:function(e,t,o){return""},v:r,t:i,render:function(e,t,o){return this.ri([e],t||{},o)},ri:function(e,t,o){return this.r(e,t,o)},ep:function(e,t){var n=this.partials[e],i=t[n.name];if(n.instance&&n.base==i)return n.instance;if("string"==typeof i){if(!this.c)throw new Error("No compiler available.");i=this.c.compile(i,this.options)}if(!i)return null;if(this.partials[e].base=i,n.subs){t.stackText||(t.stackText={});for(key in n.subs)t.stackText[key]||(t.stackText[key]=void 0!==this.activeSub&&t.stackText[this.activeSub]?t.stackText[this.activeSub]:this.text);i=o(i,n.subs,n.partials,this.stackSubs,this.stackPartials,t.stackText)}return this.partials[e].instance=i,i},rp:function(e,t,o,n){var i=this.ep(e,o);return i?i.ri(t,o,n):""},rs:function(e,t,o){var n=e[e.length-1];if(!f(n))return void o(e,t,this);for(var i=0;i<n.length;i++)e.push(n[i]),o(e,t,this),e.pop()},s:function(e,t,o,i,r,s,a){var l;return(!f(e)||0!==e.length)&&("function"==typeof e&&(e=this.ms(e,t,o,i,r,s,a)),l=!!e,!i&&l&&t&&t.push("object"==(void 0===e?"undefined":n(e))?e:t[t.length-1]),l)},d:function(e,o,n,i){var r,s=e.split("."),a=this.f(s[0],o,n,i),l=this.options.modelGet,c=null;if("."===e&&f(o[o.length-2]))a=o[o.length-1];else for(var u=1;u<s.length;u++)r=t(s[u],a,l),void 0!==r?(c=a,a=r):a="";return!(i&&!a)&&(i||"function"!=typeof a||(o.push(c),a=this.mv(a,o,n),o.pop()),a)},f:function(e,o,n,i){for(var r=!1,s=null,a=!1,l=this.options.modelGet,c=o.length-1;c>=0;c--)if(s=o[c],void 0!==(r=t(e,s,l))){a=!0;break}return a?(i||"function"!=typeof r||(r=this.mv(r,o,n)),r):!i&&""},ls:function(e,t,o,n,r){var s=this.options.delimiters;return this.options.delimiters=r,this.b(this.ct(i(e.call(t,n)),t,o)),this.options.delimiters=s,!1},ct:function(e,t,o){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(e,this.options).render(t,o)},b:function(e){this.buf+=e},fl:function(){var e=this.buf;return this.buf="",e},ms:function(e,t,o,n,i,r,s){var a,l=t[t.length-1],c=e.call(l);return"function"==typeof c?!!n||(a=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(c,l,o,a.substring(i,r),s)):c},mv:function(e,t,o){var n=t[t.length-1],r=e.call(n);return"function"==typeof r?this.ct(i(r.call(n)),n,o):r},sub:function(e,t,o,n){var i=this.subs[e];i&&(this.activeSub=e,i(t,o,this,n),this.activeSub=!1)}};var s=/&/g,a=/</g,l=/>/g,c=/\'/g,u=/\"/g,d=/[&<>\"\']/,f=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}(t)},442:function(e,t){e.exports='<div class="o-comment-ui--unavailable-message" style="clear: both; font-style: italic; font-size: {{fontSize}}{{^fontSize}}14px{{/fontSize}}; font-family: MetricWeb, serif; {{style}}">\n    {{{message}}}\n    {{^message}}\n        It seems we\'re having a problem loading comments for you. Apologies. Hopefully it\'s temporary, but if you continue to experience this difficulty, please contact <a href="mailto:help@ft.com">help@ft.com</a>.\n    {{/message}}\n</div>\n'},443:function(e,t){e.exports='<div class="o-comment-ui--unavailable-message" style="clear: both; font-style: italic; font-size: {{fontSize}}{{^fontSize}}14px{{/fontSize}}; font-family: MetricWeb, serif; {{style}}">\n    {{{message}}}\n    {{^message}}\n        It seems we\'re having a problem accepting new comments. Apologies. Hopefully it\'s temporary, but if you continue to experience this difficulty, please contact <a href="mailto:help@ft.com">help@ft.com</a>.\n    {{/message}}\n</div>\n'},444:function(e,t){e.exports='<div class="o-comment-ui--terms-message">\n    Please keep comments respectful. By commenting, you agree to abide by our <a target="_blank" href="http://www.ft.com/servicestools/help/comments-policy">community guidelines</a> and <a target="_blank" href="http://www.ft.com/servicestools/help/terms">these terms and conditions</a>. We encourage you to report inappropriate comments.\n</div>\n'},445:function(e,t){e.exports='<div class="o-comment-ui--clear"></div>\n'},446:function(e,t){e.exports='<div class="o-comment-ui--settings">\n    {{^withoutSeparator}}|{{/withoutSeparator}}<div class="o-comment-ui--settings-text">\n    <i class="o-comment-ui--settings-icon"></i> {{label}}{{^label}}Commenting settings{{/label}}</div>\n</div>\n'},447:function(e,t){e.exports='<div class="o-comment-ui--env-display">Comments environment: <strong>{{envName}}</strong></div>\n'},448:function(e,t,o){"use strict";t.showSetPseudonymDialog=o(449).show,t.showSettingsDialog=o(461).show,t.showChangePseudonymDialog=o(462).show,t.showEmailAlertDialog=o(463).show,t.showInactivityMessage=o(464).show},449:function(e,t,o){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=o(8),r=o(37),s=o(1),a=!1;t.show=function(e){if(!1===a){if("object"!==(void 0===e?"undefined":n(e))||!e)throw new Error("Callbacks not provided.");if("function"!=typeof e.submit)throw new Error("Submit callback not provided.");a=!0;var t=!1,o=!1,l=new r({method:"GET",action:"",name:"setpseudonym",items:[{type:"initialPseudonym"}],buttons:[{type:"submitButton",label:"Save"},{type:"cancelButton"}]}),c=new i("oCommentUi_setPseudonymDialog",{html:l.getContainerDomElement(),heading:{title:"Commenting Settings"},modal:!0}),u=function(n){if(!t){t=!0,l.disableButtons();var i=l.serialize();e.submit(i,function(e){if(e)return l.showError(e),l.enableButtons(),void(t=!1);a=!1,o=!0,c.close()})}return n.preventDefault?n.preventDefault():n.returnValue=!1,!1};l.getFormDomElement().addEventListener("submit",u);var d=function n(){a=!1,l&&(l.getFormDomElement().removeEventListener("submit",u),l.getContainerDomElement().removeEventListener("oCommentUi.form.cancel",f),l.destroy(),l=null),c&&(c.wrapper.removeEventListener("oOverlay.destroy",n),c=null),o||("function"==typeof e.close&&e.close(),t||s.logger.log("pseudonym refused"))};c.open();var f=function(){c.close()};l.getContainerDomElement().addEventListener("oCommentUi.form.cancel",f),c.wrapper.addEventListener("oOverlay.destroy",d)}}},450:function(e,t,o){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=o(48),r=i.compile(o(451)),s=i.compile(o(452)),a=i.compile(o(453)),l=i.compile(o(454)),c=i.compile(o(455));t.initialPseudonym=function(){return r.render({legend:"Pseudonym",content:s.render({name:"pseudonym",label:"In order to use the commenting system, please choose a pseudonym.",currentPseudonym:""})})},t.changePseudonym=function(e){return r.render({legend:"Pseudonym",content:s.render({name:"pseudonym",label:"This is displayed with your comments. If you change it, previous comments will also be attributed to the new pseudonym.",currentPseudonym:e.currentPseudonym||""})})};var u=function(e){return e&&"object"===(void 0===e?"undefined":n(e))||(e={}),e.emailcomments=e.emailcomments||"hourly",e.emailreplies=e.emailreplies||"immediately",e.emaillikes=e.emaillikes||"never",a.render({selects:[{name:"emailreplies",label:"Someone replies to my comments:",options:[{val:"never",label:"Never",selected:"never"===e.emailreplies},{val:"immediately",label:"Immediately",selected:"immediately"===e.emailreplies},{val:"hourly",label:"Hourly",selected:"hourly"===e.emailreplies}]},{name:"emaillikes",label:"Someone recommends my comments:",options:[{val:"never",label:"Never",selected:"never"===e.emaillikes},{val:"immediately",label:"Immediately",selected:"immediately"===e.emaillikes},{val:"hourly",label:"Hourly",selected:"hourly"===e.emaillikes}]},{name:"emailcomments",label:"Someone comments in a conversation I'm following:",options:[{val:"never",label:"Never",selected:"never"===e.emailcomments},{val:"immediately",label:"Immediately",selected:"immediately"===e.emailcomments},{val:"hourly",label:"Hourly",selected:"hourly"===e.emailcomments}]}],checkboxes:[{name:"emailautofollow",label:"Check to automatically follow a conversation you comment on:",checked:"on"===e.emailautofollow}]})};t.emailSettings=function(e){return r.render({legend:"Email Settings",content:"Receive alerts when:<br/>"+u(e.currentSettings)})},t.emailSettingsStandalone=function(e){return r.render({legend:"Email Settings",content:u(e.currentSettings)})},t.followExplanation=function(){return l.render({text:"To receive email alerts about conversations that you're interested in, click the 'follow' button that now appears on the comment box.",type:"follow"})},t.commentingSettingsExplanation=function(){return l.render({text:"You can manage your settings in the Commenting settings panel above the comment box.",type:"settings"})},t.sessionExpired=function(){return c.render({location:encodeURIComponent(document.location.href)})}},451:function(e,t){e.exports='<fieldset>\n    <legend>{{legend}}</legend>\n    {{{content}}}\n</fieldset>\n<div class="o-comment-ui--clear"></div>\n'},452:function(e,t){e.exports='<label for="{{name}}">{{label}}</label>\n<input type="text" name="{{name}}" id="{{name}}" class="input-text" value="{{currentPseudonym}}" />\n'},453:function(e,t){e.exports='{{#selects}}\n    <label for="{{name}}" class="label-inline" style="width: 75%;">{{label}}</label>\n    <select name="{{name}}" id="{{name}}" class="input-inline" style="width: 24%;">\n        {{#options}}\n            <option value="{{val}}" {{#selected}}selected="selected"{{/selected}}>{{label}}</option>\n        {{/options}}\n    </select>\n    <div class="clear"></div>\n{{/selects}}\n\n<br/>\n\n{{#checkboxes}}\n    <label for="{{name}}" class="label-inline" style="width: 75%">{{label}}</label>\n    <input type="checkbox" class="checkbox" name="{{name}}" id="{{name}}" {{#checked}}checked="checked"{{/checked}}>\n{{/checkboxes}}\n'},454:function(e,t){e.exports='<div class="o-comment-ui--overlay-explanation">\n    <div class="o-comment-ui--overlay-explanation-text-container">\n        <div class="o-comment-ui--overlay-explanation-text-bg">\n            <div class="o-comment-ui--overlay-explanation-text">\n                {{text}}\n            </div>\n        </div>\n    </div>\n    <div class="o-comment-ui--overlay-explanation-image-wrapper">\n        <div class="o-comment-ui--overlay-explanation-image-container">\n            <div class="o-comment-ui--overlay-explanation-image-inner-container">\n                <span class="o-comment-ui--overlay-explanation-image o-comment-ui--overlay-explanation-{{type}}">&nbsp;</span>\n            </div>\n        </div>\n    </div>\n</div>\n<div class="o-comment-ui--clear"></div>\n'},455:function(e,t){e.exports='Sorry, due to inactivity you have been signed out.\nTo continue please\n<a href="https://accounts.ft.com/login?location={{location}}">sign in</a>\nagain.\n'},456:function(e,t){e.exports='<div class="o-comment-ui--overlay-error-message"></div>\n'},457:function(e,t){e.exports='<div class="o-comment-ui--overlay-button-container"></div>\n'},458:function(e,t){e.exports='<button type="{{type}}" class="o-comment-ui--button">\n    {{label}}\n</button>\n'},459:function(e,t){e.exports='<span class="o-comment-ui--overlay-cancel">\n    or <button class="o-comment-ui--cancel-button" type="button">\n        {{label}}\n    </button>\n</span>\n'},460:function(e,t){e.exports='<span class="o-comment-ui--dismiss">\n    <label for="o-comment-ui--dismiss">\n        {{label}}\n    </label>\n    <input name="dismiss" id="dismiss" type="checkbox" />\n</span>\n'},461:function(e,t,o){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=o(8),r=o(37),s=!1;t.show=function(e,t){if(!1===s){if("object"!==(void 0===t?"undefined":n(t))||!t)throw new Error("Callbacks not provided.");if("function"!=typeof t.submit)throw new Error("Submit callback not provided.");s=!0;var o=!1,a=e&&"object"===(void 0===e?"undefined":n(e))&&e.settings?e.settings:{},l=e&&"object"===(void 0===e?"undefined":n(e))&&e.displayName?e.displayName:"",c=new r({method:"GET",action:"",name:"changepseudonym",items:[{type:"changePseudonym",currentPseudonym:l},{type:"emailSettings",currentSettings:a}],buttons:[{type:"submitButton",label:"Save"},{type:"cancelButton"}]}),u=new i("oCommentUi_settingsDialog",{html:c.getContainerDomElement(),heading:{title:"Commenting Settings"},modal:!0}),d=!1,f=function(e){if(!o){o=!0,c.disableButtons();var n=c.serialize();"on"!==n.emailautofollow&&(n.emailautofollow="off"),t.submit(n,function(e){if(e)return c.showError(e),c.enableButtons(),void(o=!1);s=!1,d=!0,u.close()})}return e.preventDefault?e.preventDefault():e.returnValue=!1,!1};c.getFormDomElement().addEventListener("submit",f);var m=function e(){s=!1,c&&(c.getFormDomElement().removeEventListener("submit",f),c.getContainerDomElement().removeEventListener("oCommentUi.form.cancel",p),c.destroy(),c=null),u&&(u.wrapper.removeEventListener("oOverlay.destroy",e),u=null),d||"function"==typeof t.close&&t.close()};u.open();var p=function(){u.close()};c.getContainerDomElement().addEventListener("oCommentUi.form.cancel",p),u.wrapper.addEventListener("oOverlay.destroy",m)}}},462:function(e,t,o){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=o(37),r=o(8),s=!1;t.show=function(e,t){if(!1===s){if("object"!==(void 0===t?"undefined":n(t))||!t)throw new Error("Callbacks not provided.");if("function"!=typeof t.submit)throw new Error("Submit callback not provided.");if(!e)return;s=!0;var o=!1;e=e||"";var a=new i({method:"GET",action:"",name:"changepseudonym",items:[{type:"changePseudonym",currentPseudonym:e}],buttons:[{type:"submitButton",label:"Save"},{type:"cancelButton"}]}),l=new r("oCommentUi_changePseudonymDialog",{html:a.getContainerDomElement(),heading:{title:"Commenting Settings"},modal:!0}),c=!1,u=function(e){if(!o){o=!0,a.disableButtons();var n=a.serialize();t.submit(n,function(e){if(e)return a.showError(e),a.enableButtons(),void(o=!1);s=!1,c=!0,l.close()})}return e.preventDefault?e.preventDefault():e.returnValue=!1,!1};a.getFormDomElement().addEventListener("submit",u);var d=function e(){s=!1,a&&(a.getFormDomElement().removeEventListener("submit",u),a.getContainerDomElement().removeEventListener("oCommentUi.form.cancel",f),a.destroy(),a=null),l&&(l.wrapper.removeEventListener("oOverlay.destroy",e),l=null),c||"function"==typeof t.close&&t.close()};l.open();var f=function(){l.close()};a.getDomElement().addEventListener("oCommentUi.form.cancel",f),l.wrapper.addEventListener("oOverlay.destroy",d)}}},463:function(e,t,o){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=o(8),r=o(37),s=!1;t.show=function(e){if(!1===s){if("object"!==(void 0===e?"undefined":n(e))||!e)throw new Error("Callbacks not provided.");if("function"!=typeof e.submit)throw new Error("Submit callback not provided.");s=!0;var t=!1,o=!1,a=new r({method:"GET",action:"",name:"changepseudonym",items:["<strong>Your comment has been submitted.</strong>",{type:"followExplanation"},{type:"emailSettingsStandalone"},{type:"commentingSettingsExplanation"}],buttons:[{type:"dismiss",label:"Don't show me this message again:"},{type:"submitButton",label:"Save"}]}),l=new i("oCommentUi_emailAlertDialog",{html:a.getContainerDomElement(),heading:{title:"Commenting Settings"},modal:!0}),c=function(n){if(!t){t=!0;var i=a.serialize();"on"!==i.emailautofollow&&(i.emailautofollow="off"),delete i.dismiss,a.disableButtons(),e.submit(i,function(e){if(e)return a.showError(e),t=!1,void a.enableButtons();o=!0,l.close()})}return n.preventDefault?n.preventDefault():n.returnValue=!1,!1};a.getDomElement().addEventListener("submit",c);var u=function t(){s=!1,a&&(a.getFormDomElement().removeEventListener("submit",c),a.getContainerDomElement().removeEventListener("oCommentUi.form.cancel",d),a.destroy(),a=null),l&&(l.wrapper.removeEventListener("oOverlay.destroy",t),l=null),o||"function"==typeof e.close&&e.close()};l.open();var d=function(){l.close()};a.getDomElement().addEventListener("oCommentUi.form.cancel",d),l.wrapper.addEventListener("oOverlay.destroy",u)}}},464:function(e,t,o){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=o(8),r=o(37),s=!1;t.show=function(e){if(!1===s){if("object"!==(void 0===e?"undefined":n(e))||!e)throw new Error("Callbacks not provided.");if("function"!=typeof e.submit)throw new Error("Submit callback not provided.");s=!0;var t=new r({method:"GET",action:"",name:"sessionexpired",items:[{type:"sessionExpired"}],buttons:[{type:"submitButton",label:"Sign in"},{type:"cancelButton"}]}),o=new i("oCommentUi_inactivityMessageDialog",{html:t.getContainerDomElement(),heading:{title:"Session expired"},modal:!0}),a=function(t){return e.submit(),t.preventDefault?t.preventDefault():t.returnValue=!1,!1};t.getDomElement().addEventListener("submit",a);var l=function n(){s=!1,t&&(t.getFormDomElement().removeEventListener("submit",a),t.getContainerDomElement().removeEventListener("oCommentUi.form.cancel",c),t.destroy(),t=null),o&&(o.wrapper.removeEventListener("oOverlay.destroy",n),o=null),"function"==typeof e.close&&e.close()};o.open();var c=function(){o.close()};t.getDomElement().addEventListener("oCommentUi.form.cancel",c),o.wrapper.addEventListener("oOverlay.destroy",l)}}},465:function(e,t,o){"use strict";function n(e,t){function o(e,t,i,r){var s=n.widgetContainer.querySelector('.fyre-comment-article[data-message-id="'+e+'"]');!s||t&&!s.querySelector(".fyre-comment-date")?i<1e3?setTimeout(function(){o(e,t,2*i,r)},i):r():r(s)}s.WidgetUi.apply(this,arguments),this.config||(this.config=t),"object"!==i(this.config)&&(this.config={}),this.config.layout||(this.config.layout="normal"),this.config.stream_type||(this.config.stream_type="livecomments");var n=this;this.makeReadOnly=function(){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css";var o="#"+n.widgetContainer.id+" .fyre-editor, #"+n.widgetContainer.id+" .fyre-comment-like, #"+n.widgetContainer.id+" .fyre-comment-action-button {display: none;}";t.styleSheet?t.styleSheet.cssText=o:t.appendChild(document.createTextNode(o)),e.appendChild(t)},this.hideFollowButton=function(){var e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css";var o="#"+n.widgetContainer.id+" .fyre-follow-button {display: none;}";t.styleSheet?t.styleSheet.cssText=o:t.appendChild(document.createTextNode(o)),e.appendChild(t)},this.hideSignInLink=function(){var e=n.widgetContainer.querySelector("a.fyre-user-loggedout");e&&(e.style.display="none")},this.addAuthNotAvailableMessage=function(){var e=n.widgetContainer.querySelector(".fyre-auth");e&&e.appendChild(s.utils.toDOM(s.templates.authUnavailableTemplate.render()))},this.addTermsAndGuidelineMessage=function(){var e=n.widgetContainer.querySelectorAll(".fyre-widget > .fyre-editor");if(e.length)for(var t=0;t<e.length;t++)e[t].parentNode.insertBefore(s.utils.toDOM(s.templates.termsAndGuidelinesTemplate.render()),e[t].nextSibling)},this.addSettingsLink=function(e){r.logger.log("Commenting settings link adding triggered.");var t=0;clearInterval(c),c=setInterval(function(){if(n.widgetContainer.querySelector(".fyre-auth .fyre-login-bar .fyre-box-wrapper .fyre-user-loggedin")||120===t){if(clearInterval(c),!n.widgetContainer.querySelector(".o-comment-ui--settings")){if(120===t)return;var o=n.widgetContainer.querySelector(".fyre-auth .fyre-login-bar");if(o){var i={};!0!==a.get().emailNotifications&&(i.label="Edit pseudonym"),o.appendChild(s.utils.toDOM(s.templates.commentingSettingsLink.render(i)))}var r=n.widgetContainer.querySelector(".fyre-auth .fyre-login-bar .o-comment-ui--settings-text");r&&(r.addEventListener("click",function(){e&&"function"==typeof e.onClick&&e.onClick()}),e&&"function"==typeof e.onAdded&&e.onAdded())}}else t++},500)};var c=void 0;this.removeSettingsLink=function(){var e=n.widgetContainer.querySelector(".o-comment-ui--settings");e&&e.parentNode.removeChild(e)},this.moveCommentCountOut=function(){var e=n.widgetContainer.querySelector(".fyre"),t=n.widgetContainer.querySelector(".fyre-stream-stats");if(e&&t){var o=t.querySelector(".fyre-comment-count");o&&(e.style.paddingTop="30px",e.style.position="relative",t.style.position="absolute",t.style.top="0",t.style.float="none",t.style.width="100%",t.className="comment-header",o.className="")}},this.showCommentBanned=function(e){o(e,!0,50,function(e){if(e&&!e.querySelector(".o-comments--blocked")){var t=document.createElement("div");if(t.innerHTML="blocked",t.className="o-comments--blocked","side"===n.config.layout){var o=e.querySelector(".fyre-comment-head");o.insertBefore(t,o.firstChild)}else e.querySelector(".fyre-comment-date").style.display="none",e.appendChild(t)}})},this.removeCommentBanned=function(e){o(e,!1,50,function(e){e&&e.querySelector(".o-comments--blocked")&&(e.removeChild(e.querySelector(".o-comments--blocked")),e.querySelector(".fyre-comment-date")&&(e.querySelector(".fyre-comment-date").style.display=""))})},this.hideDeleteButtons=function(e){for(var t=n.widgetContainer.querySelector(".fyre-widget .fyre-comment-stream"),o=t.querySelectorAll(".fyre-comment-wrapper"),i=0;i<o.length;i++){var r=o[i],s=r.querySelector('meta[itemprop="dateCreated"]'),a=r.querySelector(".fyre-ban-link"),l=r.querySelector(".fyre-delete-link");if(s&&l&&!a){var c=s.getAttribute("content");(new Date).getTime()-new Date(c).getTime()>60*e*1e3&&l.parentNode.removeChild(l)}}},this.onNewCommentVisible=function(e){var t=new l(document.querySelector(".fyre"));t.on("click",".fyre-stream-more",e),t.on("click",".fyre-reply-more-toggle",e)};var u=this.destroy;this.destroy=function(){clearInterval(c),u(),u=null}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=o(1),s=o(106),a=o(36),l=o(466);n.__extend=function(e){if("function"==typeof Object.create)e.prototype=Object.create(n.prototype);else{var t=function(){};t.prototype=n.prototype,e.prototype=new t,e.prototype.constructor=e}},s.WidgetUi.__extend(n),e.exports=n},466:function(e,t,o){"use strict";function n(e){this.listenerMap=[{},{}],e&&this.root(e),this.handle=n.prototype.handle.bind(this)}function i(e,t){return e.toLowerCase()===t.tagName.toLowerCase()}function r(e,t){return this.rootElement===window?t===document:this.rootElement===t}function s(e,t){return e===t.id}e.exports=n,n.prototype.root=function(e){var t,o=this.listenerMap;if(this.rootElement){for(t in o[1])o[1].hasOwnProperty(t)&&this.rootElement.removeEventListener(t,this.handle,!0);for(t in o[0])o[0].hasOwnProperty(t)&&this.rootElement.removeEventListener(t,this.handle,!1)}if(!e||!e.addEventListener)return this.rootElement&&delete this.rootElement,this;this.rootElement=e;for(t in o[1])o[1].hasOwnProperty(t)&&this.rootElement.addEventListener(t,this.handle,!0);for(t in o[0])o[0].hasOwnProperty(t)&&this.rootElement.addEventListener(t,this.handle,!1);return this},n.prototype.captureForType=function(e){return-1!==["blur","error","focus","load","resize","scroll"].indexOf(e)},n.prototype.on=function(e,t,o,n){var l,c,u,d;if(!e)throw new TypeError("Invalid event type: "+e);if("function"==typeof t&&(n=o,o=t,t=null),void 0===n&&(n=this.captureForType(e)),"function"!=typeof o)throw new TypeError("Handler must be a type of Function");return l=this.rootElement,c=this.listenerMap[n?1:0],c[e]||(l&&l.addEventListener(e,this.handle,n),c[e]=[]),t?/^[a-z]+$/i.test(t)?(d=t,u=i):/^#[a-z0-9\-_]+$/i.test(t)?(d=t.slice(1),u=s):(d=t,u=a):(d=null,u=r.bind(this)),c[e].push({selector:t,handler:o,matcher:u,matcherParam:d}),this},n.prototype.off=function(e,t,o,n){var i,r,s,a,l;if("function"==typeof t&&(n=o,o=t,t=null),void 0===n)return this.off(e,t,o,!0),this.off(e,t,o,!1),this;if(s=this.listenerMap[n?1:0],!e){for(l in s)s.hasOwnProperty(l)&&this.off(l,t,o);return this}if(!(a=s[e])||!a.length)return this;for(i=a.length-1;i>=0;i--)r=a[i],t&&t!==r.selector||o&&o!==r.handler||a.splice(i,1);return a.length||(delete s[e],this.rootElement&&this.rootElement.removeEventListener(e,this.handle,n)),this},n.prototype.handle=function(e){var t,o,n,i,r,s,a=e.type,l=[];if(!0!==e.ftLabsDelegateIgnore){switch(s=e.target,3===s.nodeType&&(s=s.parentNode),n=this.rootElement,e.eventPhase||(e.target!==e.currentTarget?3:2)){case 1:l=this.listenerMap[1][a];break;case 2:this.listenerMap[0]&&this.listenerMap[0][a]&&(l=l.concat(this.listenerMap[0][a])),this.listenerMap[1]&&this.listenerMap[1][a]&&(l=l.concat(this.listenerMap[1][a]));break;case 3:l=this.listenerMap[0][a]}for(o=l.length;s&&o;){for(t=0;t<o&&(i=l[t]);t++)if(i.matcher.call(s,i.matcherParam,s)&&(r=this.fire(e,s,i)),!1===r)return e.ftLabsDelegateIgnore=!0,void e.preventDefault();if(s===n)break;o=l.length,s=s.parentElement}}},n.prototype.fire=function(e,t,o){return o.handler.call(t,e,t)};var a=function(e){if(e){var t=e.prototype;return t.matches||t.matchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector}}(Element);n.prototype.destroy=function(){this.off(),this.root()}},467:function(e,t,o){"use strict";var n=o(1),i=o(20);t.trackPost=function(e,t){"number"==typeof e&&(i.trigger("event","oTracking",{category:"comment",action:"post",site_id:e,parent:t}),n.logger.debug("tracking - post",e,t))},t.trackLike=function(e){"number"==typeof e&&(i.trigger("event","oTracking",{category:"comment",action:"like",site_id:e}),n.logger.debug("tracking - like",e))},t.trackShare=function(e,t){"number"==typeof e&&"string"==typeof t&&(i.trigger("event","oTracking",{category:"comment",action:"share",site_id:e,platform:t}),n.logger.debug("tracking - share",e,t))},t.trackMention=function(e,t){"number"==typeof e&&"string"==typeof t&&(i.trigger("event","oTracking",{category:"comment",action:"mention",site_id:e,platform:t}),n.logger.debug("tracking - mention",e,t))};var r={emailcomments:"notifyComments",emailreplies:"notifyReplies",emaillikes:"notifyRecommends",emailautofollow:"autoFollow"};t.trackSubscribeToEmailAlert=function(e){for(var t={category:"comment",action:"follow"},o=void 0,s=0;s<e.length;s++)(o=r[e[s]])&&(t[o]=!0);i.trigger("event","oTracking",t),n.logger.debug("tracking - subscribe","follow=true&type=comment",e)},t.trackUnsubscribeFromEmailAlert=function(e){for(var t={category:"comment",action:"unfollow"},o=void 0,s=0;s<e.length;s++)(o=r[e[s]])&&(t[o]=!0);i.trigger("event","oTracking",t),n.logger.debug("tracking - unsubscribe","unfollow=true&type=comment",e)},t.trackSudsDown=function(){i.trigger("event","oTracking",{category:"component",action:"error",error:"commentsSUDSCommunication"}),n.logger.debug("tracking - suds down")},t.trackLivefyreDown=function(){i.trigger("event","oTracking",{category:"component",action:"error",error:"commentsLivefyreCommunication"}),n.logger.debug("tracking - livefyre down")},t.trackSuccessLoad=function(){i.trigger("event","oTracking",{category:"component",action:"load",component:"comments"}),n.logger.debug("tracking - success load")}},48:function(e,t,o){"use strict";var n=o(439);e.exports=n},49:function(e,t,o){"use strict";var n=o(1);t.emptyLivefyreActionQueue=function(){"undefined"!=typeof Storage&&n.storageWrapper.localStorage.removeItem("fyre-action-queue")},t.isLivefyreActionQueuePresent=function(){return!("undefined"==typeof Storage||!localStorage.getItem("fyre-action-queue"))},t.isPermalinkPresent=function(){return!(!document.location.hash||-1===document.location.hash.indexOf("lf-content")&&-1===document.location.hash.indexOf("lf_comment"))||!(!document.location.search||-1===document.location.search.indexOf("hubRefSrc=permalink"))},t.cloneObject=function(e){return JSON.parse(JSON.stringify(e))}},5:function(e,t,o){"use strict";var n=o(1).EnvConfig;e.exports=new n},54:function(e,t,o){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var r=o(7),s=o(4),a=o(55),l=o(57),c={},u=function(e){if(!e.trigger||e.trigger instanceof HTMLElement||(e.trigger=document.querySelector(e.trigger)),e.heading&&(!e.heading.title||!e.heading.title.trim()))throw new Error('"o-overlay error": To have a heading, a non-empty title needs to be set');if(void 0===e.modal&&(e.modal=!0),void 0===e.layer&&(e.layer=!0),e.compact&&e.heading&&e.heading.shaded)throw new Error('"o-overlay error": Compact overlays can\'t have a shaded header');return e.parentNode&&(console.warn("Please change the instantation of o-overlay to use the `parentnode` option instead of `parentNode`. `parentNode` will be removed in a future major version."),e.parentnode=e.parentNode),e.noFocus&&(console.warn("Please change the instantation of o-overlay to use the `nofocus` option instead of `noFocus`. `noFocus` will be removed in a future major version."),e.nofocus=e.noFocus),e},d=function(e){var t={};return e instanceof HTMLElement&&(Array.prototype.forEach.call(e.attributes,function(e){if(0===e.name.indexOf("data-o-overlay")){var o=e.name.replace("data-o-overlay-","");t=l.optionsFromKey(o,e.value,t)}}),t.trigger=e),t},f=function(e,t){t.stopPropagation();var o=c[e];o&&(!0===o.visible?o.close():o.open())},m=function(e,t){c[e]&&console.warn('o-overlay with id "'+e+'" already exists. Creating an overlay twice with the same id may result in unexpected behaviour. This will error in the next major release of o-overlay.'),s.listenTo("resize"),this.visible=!1,this.id=e;try{this.opts=u(t)}catch(e){throw this.broadcast("log","oErrors",{error:e}),e}if(!this.opts){var o=new Error('"o-overlay error": Required options have not been set');throw this.broadcast("log","oErrors",{error:o}),o}this.opts.trigger?(this.opts.trigger.addEventListener("click",f.bind(this.opts.trigger,e),!1),this.context=a.getLayerContext(this.opts.trigger)):document.querySelector(this.opts.parentnode)?this.context=document.querySelector(this.opts.parentnode):this.context=document.body,this.delegates={doc:new r,wrap:new r,context:new r},c[e]=this};m.prototype.open=function(){if((this.opts.modal||this.opts.fullscreen)&&(this.originalOverflow=document.documentElement.style.overflow,document.documentElement.style.overflow="hidden"),window.history.pushState&&this.opts.fullscreen&&(window.history.pushState(i({},"o-overlay-"+this.id,"fullscreen"),window.location.href),this.popstateHandler=function(){window.history.state&&window.history.state["o-overlay-"+this.id]&&this.close()}.bind(this),window.addEventListener("popstate",this.popstateHandler)),this.opts.trigger&&this.opts.trigger.setAttribute("aria-pressed","true"),this.content)this.show();else{var e=this;this.loadContent(function(t){if(e.opts.html=t,!e.opts.html)throw new Error('"o-overlay error": Content for the overlay needs to be set via the "html" or the "src" option.');e.render()})}},m.prototype.loadContent=function(e){!this.opts.html&&this.opts.src?/^(https?\:\/)?\//.test(this.opts.src)?l.copyContentFromUrl(this.opts.src,function(t){e(t)}):l.copyContentFromElement(document.querySelector(this.opts.src),function(t){e(t)}):e(this.opts.html)},m.prototype.render=function(){var e=document.createElement("div");if(e.className="o-overlay",e.classList.add("o-overlay--"+this.id.replace(" ","-")),this.opts.class)try{var t;(t=e.classList).add.apply(t,n(this.opts.class.split(" ")))}catch(e){console.warn("Could not add the classes: "+this.opts.class)}if(this.opts.fullscreen&&e.classList.add("o-overlay--full-screen"),e.setAttribute("role","dialog"),this.opts.zindex&&(e.style.zIndex=this.opts.zindex),this.wrapper=e,this.opts.heading){var o=document.createElement("header"),i=this.opts.heading.title.replace(" ","-").toLowerCase();if(o.classList.add("o-overlay__heading"),o.setAttribute("id",i),e.setAttribute("aria-labelledby",i),this.opts.heading.shaded&&o.classList.add("o-overlay__heading--shaded"),!this.opts.preventclosing){var r=document.createElement("a");r.className="o-overlay__close",r.setAttribute("role","button"),r.setAttribute("href","#void"),r.setAttribute("aria-label","Close"),r.setAttribute("title","Close"),this.opts.nofocus||r.setAttribute("tabindex","0"),o.appendChild(r)}var s=document.createElement("span");s.setAttribute("role","heading"),s.className="o-overlay__title",this.opts.heading.visuallyHideTitle||(s.innerHTML=this.opts.heading.title),o.appendChild(s),e.appendChild(o)}if(this.opts.tooltip){var a=document.createElement("a");a.className="o-overlay__close",a.setAttribute("role","button"),a.setAttribute("href","#void"),a.setAttribute("aria-label","Close"),a.setAttribute("title","Close"),this.opts.nofocus||a.setAttribute("tabindex","0"),e.appendChild(a),e.classList.add("o-overlay--compact")}var l=document.createElement("section");l.className="o-overlay__content",e.appendChild(l),this.content=l,this.opts.compact&&e.classList.add("o-overlay--compact"),this.show()},m.prototype.show=function(){if(this.opts.modal){this.wrapper.classList.add("o-overlay--modal");var e=document.createElement("div");e.className="o-overlay-shadow",this.shadow=e,document.body.appendChild(e)}this.delegates.doc.root(document.body),this.delegates.wrap.root(this.wrapper),this.delegates.context.root(this.context),this.closeHandler=this.close.bind(this),this.opts.nested||(this.resizeListenerHandler=this.resizeListener.bind(this),this.delegates.doc.on("oViewport.resize","body",this.resizeListenerHandler),this.closeOnEscapePressHandler=this.closeOnEscapePress.bind(this),this.delegates.doc.on("keyup",this.closeOnEscapePressHandler)),this.opts.layer&&(this.closeOnNewLayerHandler=this.closeOnNewLayer.bind(this),this.delegates.context.on("oLayers.new",this.closeOnNewLayerHandler),this.broadcast("new","oLayers")),(this.opts.heading||this.opts.tooltip||this.opts.customclose)&&(this.delegates.wrap.on("click",".o-overlay__close",this.closeHandler),this.delegates.wrap.on("touchend",".o-overlay__close",this.closeHandler)),this.closeOnExternalClickHandler=this.closeOnExternalClick.bind(this),this.delegates.doc.on("click","body",this.closeOnExternalClickHandler),this.delegates.doc.on("touchend","body",this.closeOnExternalClickHandler),this.context.appendChild(this.wrapper),this.opts.nofocus||(this.wrapper.setAttribute("tabindex","0"),this.wrapper.style.outline=0),window.requestAnimationFrame(function(){this.content.innerHTML||("string"==typeof this.opts.html?this.content.innerHTML=this.opts.html:this.content.appendChild(this.opts.html)),this.width=this.getWidth(),this.height=this.getHeight(),this.opts.nested||this.realign(),this.visible=!0,this.wrapper.focus(),this.broadcast("ready"),this.broadcast("event","oTracking",{category:"overlay",action:"show",overlay_id:this.id})}.bind(this))},m.prototype.close=function(){return this.delegates.doc.destroy(),this.delegates.wrap.destroy(),this.delegates.context.destroy(),(this.opts.modal||this.opts.fullscreen)&&(document.documentElement.style.overflow=this.originalOverflow),this.opts.fullscreen&&window.removeEventListener("popstate",this.popstateHandler),window.history.pushState&&window.history.state&&"fullscreen"===window.history.state["o-overlay-"+this.id]&&window.history.back(),s.stopListeningTo("resize"),this.broadcast("destroy"),this.broadcast("event","oTracking",{category:"overlay",action:"close",overlay_id:this.id}),this.context.removeChild(this.wrapper),this.opts.modal&&this.shadow.parentNode.removeChild(this.shadow),this.opts.trigger&&(this.opts.trigger.focus(),this.opts.trigger.setAttribute("aria-pressed","false")),this.visible=!1,this.opts.layer&&this.broadcast("close","oLayers"),!1},m.prototype.closeOnExternalClick=function(e){this.wrapper.contains(e.target)||this.opts.modal||!this.opts.trigger||this.opts.trigger.contains(e.target)||this.close()},m.prototype.closeOnEscapePress=function(e){this.opts.preventclosing||27!==e.keyCode||this.close()},m.prototype.closeOnNewLayer=function(e){e.detail&&e.detail.el===this||this.close()},m.prototype.resizeListener=function(e){this.wrapper.contains(e.target)||this.respondToWindow()},m.prototype.broadcast=function(e,t,o){t=t||"oOverlay";var n="oLayers"===t?this.context:this.wrapper||document.body;o=o||{},"oTracking"!==t&&(o.el=this),n.dispatchEvent(new CustomEvent(t+"."+e,{detail:o,bubbles:"oLayers"!==t}))},m.prototype.realign=function(e,t){return e||t?e&&!t?void this._align(e,s.getSize().dimension):void this._align(e,t):(this._align("width",s.getSize().width),void this._align("height",s.getSize().height))},m.prototype._align=function(e,t){if("width"!==e&&"height"!==e)throw new Error('Can not realign the overlay for the dimension "'+e+'". "height" or "width" expected.');if(isNaN(t))throw new Error("Can not realign the overlay for the size "+t+". A number is expected.");var o="width"===e?"left":"top";if(this.width=this.getWidth(),this.height=this.getHeight(),t<=this[e]){if(this.wrapper.classList.add("o-overlay--full-"+e),this.wrapper.style[o]="0",this.wrapper.style["margin"+l.capitalise(o)]=0,"height"===e){var n=this.wrapper.offsetHeight-this.wrapper.clientHeight;this.content.style.height=this.wrapper.offsetHeight-(this.opts.heading?this.wrapper.querySelector("header").offsetHeight:0)-n+"px"}}else"height"===e&&(this.content.style.height=null),this.wrapper.classList.remove("o-overlay--full-"+e),this.wrapper.style["margin"+l.capitalise(o)]=-this.wrapper["offset"+l.capitalise(e)]/2+"px",this.wrapper.style[o]="50%"},m.prototype.respondToWindow=function(){this.realign()},m.prototype.fills=function(e){return this.wrapper.classList.contains("o-overlay--full-"+e)},m.prototype.destroy=function(){!0===this.visible&&this.close(),this.opts.trigger&&this.opts.trigger.removeEventListener("click",f),delete c[this.id]},m.prototype.getHeight=function(){var e=this.wrapper.offsetHeight-this.wrapper.clientHeight;return this.content.scrollHeight+(this.opts.heading?this.wrapper.querySelector("header").offsetHeight:0)+e},m.prototype.getWidth=function(){var e=this.wrapper.offsetWidth-this.wrapper.clientWidth;return this.content.scrollWidth+e},m.init=function(e){e||(e=document.body),e instanceof HTMLElement||(e=document.querySelector(e));for(var t=e.querySelectorAll(".o-overlay-trigger"),o=[],n=0;n<t.length;n++)c[t[n].getAttribute("data-o-overlay-id")]||o.push(new m(t[n].getAttribute("data-o-overlay-id"),d(t[n])));return o},m.destroy=function(){Object.keys(c).forEach(function(e){c[e].destroy()})},m.getOverlays=function(){return c},e.exports=m},55:function(e,t,o){"use strict";var n=o(56);e.exports={getLayerContext:function(e){return n.getClosestMatch(e,".o-layers__context")||document.body}}},56:function(e,t,o){"use strict";function n(e,t){for(;e;){if(e.matches(t))return e;e=e.parentElement}return!1}function i(e){var t=0;if(e&&"object"===(void 0===e?"undefined":r(e))&&1===e.nodeType){for(;e.previousSibling;)e=e.previousSibling,1===e.nodeType&&++t;return t}}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.getClosestMatch=n,t.getIndex=i},57:function(e,t,o){"use strict";e.exports={unCapitalise:function(e){return e.charAt(0).toLowerCase()+e.substr(1)},capitalise:function(e){return e.charAt(0).toUpperCase()+e.substr(1)},copyContentFromElement:function(e,t){t("SCRIPT"===e.nodeName?e.innerHTML:e.outerHTML)},copyContentFromUrl:function(e,t){var o=new XMLHttpRequest;o.open("GET",e,!0),o.onload=function(){4===o.readyState&&t(200===o.status?o.responseText:"Content failed to load correctly")},o.onerror=function(t){throw new Error('"o-overlay error": Fetching content from '+e+" failed with errror "+t)},o.send(null)},optionsFromKey:function(e,t,o){var n=e.indexOf("-");if(-1===n)try{o[e]=JSON.parse(t.replace(/\'/g,'"'))}catch(n){o[e]=t}else{var i=e.substr(0,n);o[i]||(o[i]={}),o[i]=this.optionsFromKey(e.substr(n+1),t,o[i])}return o},getOffsetRect:function(e){var t=e.getBoundingClientRect(),o=document.body,n=document.documentElement,i=window.pageYOffset||n.scrollTop||o.scrollTop,r=window.pageXOffset||n.scrollLeft||o.scrollLeft,s=n.clientTop||o.clientTop||0,a=n.clientLeft||o.clientLeft||0;return{width:t.width||t.right-t.left,height:t.height||t.bottom-t.top,top:t.top+i-s,left:t.left+r-a}}}},7:function(e,t){e.exports=window.FT.nUi._hiddenComponents.ftdomdelegate},78:function(e,t,o){"use strict";function n(){var e={};this.get=function(t){return t?void 0!==e[t]?e[t]:void 0:e},this.set=function(t,o){if("string"==typeof t){if(void 0!==o){var n={};n[t]=o,e=r(e,n)}}else"object"===(void 0===t?"undefined":i(t))&&(e=r(e,t))},this.destroy=function(){e=null}}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=o(27);e.exports=n},79:function(e,t,o){"use strict";function n(){function e(e,o,n){s[e]||(s[e]=[]),s[e].push({evt:e,type:o,args:n}),t(e)}function t(e){if(!r[e]){var o=s[e].shift();if(o){switch(r[e]=!0,o.type){case"off":a.apply(n,o.args);break;case"trigger":l.apply(n,o.args)}r[e]=!1,t(e)}}}function o(e,t){for(var o=0;o<e.length;o++)if(e[o].callback===t)return o;return-1}var n=this,i={},r={},s={};this.on=function(e,t){"string"==typeof e&&"function"==typeof t&&(i[e]||(i[e]=[]),i[e].push({callback:t}))},this.one=function(e,t){"string"==typeof e&&"function"==typeof t&&(i[e]||(i[e]=[]),i[e].push({callback:t,once:!0}))};var a=function(e,t){var n=void 0===t,r="string"==typeof e,s="function"==typeof t;if(r&&i[e])if(n)delete i[e];else if(s){var a=o(i[e],t);a>-1&&i[e].splice(a,1)}};this.off=function(t,o){var n=void 0===t,r=void 0===o,s="string"==typeof t,a="function"==typeof o;if(n)for(var l in i)i.hasOwnProperty(l)&&e(l,"off",[l]);else s&&i[t]&&(r?e(t,"off",[t]):a&&e(t,"off",arguments))};var l=function(e,t){var o=void 0;if(i[e])for(t instanceof Array||(t=[t]),o=0;o<i[e].length;)i[e][o].callback.apply(this,t),!0===i[e][o].once?i[e].splice(o,1):o++};this.trigger=function(t){e(t,"trigger",arguments)},this.destroy=function(){i=null,r=null,s=null}}e.exports=n},8:function(e,t,o){"use strict";var n=o(54),i=function e(){n.init(),document.removeEventListener("o.DOMContentLoaded",e)};document.addEventListener("o.DOMContentLoaded",i),e.exports=n},80:function(e,t,o){"use strict";function n(e,t){var o=void 0,n=void 0,c=void 0,u=void 0,d=void 0;if("function"!=typeof t)throw"Callback not specified";return"object"!==(void 0===e?"undefined":i(e))?void t(new Error("Configuration not specified or has the wrong type.")):e.url?(n=!1,c=!1,u=function(e){try{delete window[o]}catch(e){window[o]=void 0}n||(n=!0,t(null,e))},d=function(e){try{delete window[o]}catch(e){window[o]=void 0}n||(n=!0,t(e||new Error("Timeout")))},o=l+a++,e.data?(e.url+="?"+r(e.data),e.url+="&callback="+o):e.url+="?callback="+o,e.url+="&_="+(new Date).getTime(),window[o]=function(e){c=!0,u(e)},void s(e,function(e){if(e)return void d(e);setTimeout(function(){c||d()},50)})):void t(new Error("URL is not specified"))}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=o(81),s=o(28),a=0,l="jsonp_"+Math.random().toString(36).substring(7);e.exports=n},81:function(e,t,o){"use strict";function n(e){var t=[];if("object"!==(void 0===e?"undefined":i(e)))throw"The argument is not an object.";for(var o in e)e.hasOwnProperty(o)&&function(e,o){o="function"==typeof o?o():null===o?"":o,t[t.length]=encodeURIComponent(e)+"="+encodeURIComponent(o)}(o,e[o]);return t.join("&").replace(/%20/g,"+")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=n},82:function(e,t,o){"use strict";var n=o(29);e.exports=new n("localStorage")},83:function(e,t,o){"use strict";var n=o(29);e.exports=new n("sessionStorage")},84:function(e,t,o){"use strict";var n=["debug","log","info","warn","error"],i=3,r=!1,s=function(e){if("function"==typeof Array.prototype.indexOf)return n.indexOf(e);for(var t=0;t<n.length;t++)if(n[t]===e)return t;return-1},a=function(){var e=window.console;return void 0!==e&&void 0!==e.log?function(t,o){if(!0===r&&t>=i)try{e[n[t]].apply(e,o)}catch(i){for(var s=0;s<o.length;s++)o[s]=JSON.stringify(o[s]);try{e[n[t]](o.join(" "))}catch(t){e.log(o.join(" "))}}}:function(){}}();t.debug=function(){var e=s("debug");return function(){a(e,Array.prototype.slice.apply(arguments))}}(),t.log=function(){var e=s("log");return function(){a(e,Array.prototype.slice.apply(arguments))}}(),t.info=function(){var e=s("info");return function(){a(e,Array.prototype.slice.apply(arguments))}}(),t.warn=function(){var e=s("warn");return function(){a(e,Array.prototype.slice.apply(arguments))}}(),t.error=function(){var e=s("error");return function(){a(e,Array.prototype.slice.apply(arguments))}}(),t.enable=function(){r=!0},t.disable=function(){r=!1},t.setLevel=function(e){if("string"==typeof e)if(isNaN(parseInt(e,10))){if(-1===s(e))throw"Level not exists";i=s(e)}else{if(!(e>=0&&e<=n.length-1))throw"Level out of range.";i=e}else if("number"==typeof e){if(!(e>=0&&e<=n.length-1))throw"Level out of range.";i=e}}},85:function(e,t,o){"use strict";function n(e,t){var o=void 0,n=!1,r={},s={};for(o in e)e.hasOwnProperty(o)&&(s[o]=!1);var a=function(){var e=void 0;for(e in s)if(s.hasOwnProperty(e)&&!s[e])return!1;n||t(null,r)};for(o in e)e.hasOwnProperty(o)&&function(o){var l=function(e,i){if(!n){if(e)return n=!0,void t({key:o,error:e});s[o]=!0,r[o]=i,a()}};if("function"==typeof e[o])e[o](l);else if("object"===i(e[o])&&"function"==typeof e[o].func)if(e[o].hasOwnProperty("args")){var c=e[o].args;c.splice(0,1,l),e[o].func.apply(this,c)}else e[o].func(l)}(o)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports=n},86:function(e,t,o){"use strict";function n(e){for(var t=e.split("-"),o=t[0],n=1;n<t.length;n++)o+=t[n].charAt(0).toUpperCase()+t[n].slice(1);return o}var i=o(30);e.exports=function(e){var t=e.context;t?t instanceof HTMLElement||(t=document.querySelector(t)):t=document.body;for(var o=t.querySelectorAll('[data-o-component="'+e.classNamespace+'"]'),r=void 0,s=void 0,a=[],l=0;l<o.length;l++)if(r=o[l],s=!r.getAttribute("data-"+e.classNamespace+"-built"),e.auto&&(s=s&&"false"!==r.getAttribute("data-"+e.classNamespace+"-auto-init")),s){r.id||(r.id=e.classNamespace+"--"+i()),r.setAttribute("data-"+e.classNamespace+"-built","true");for(var c={},u=void 0,d=void 0,f=void 0,m=void 0,p=0;p<r.attributes.length;p++)if((u=r.attributes[p].name.match(new RegExp("data-"+e.classNamespace+"-config-(.*)")))&&u.length){d=u[1].split("--"),f=c;for(var g=0;g<d.length;g++)m=n(d[g]),g===d.length-1?f[m]=function(e){if("true"===e)return!0;if("false"===e)return!1;var t=parseInt(e,10);return!isNaN(e)&&t?t:e}(r.attributes[p].value):f[m]||(f[m]={},f=f[m])}var h=new e.module(r,c);document.body.dispatchEvent(new CustomEvent(e.eventNamespace+".ready",{detail:{id:r.id,instance:h},bubble:!0})),a.push(h)}return a}},87:function(e,t,o){"use strict";function n(e){return e<10?"0"+e:e}var i={toTimestamp:function(e){return e instanceof Date?e.getTime():"string"==typeof e?new Date(e).getTime():"number"==typeof e&&parseInt(e,10).toString().length<13?1e3*e:e},toDateObject:function(e){return e instanceof Date?e:new Date(i.toTimestamp(e))},toISOString:function(e){var t=i.toDateObject(e);return t.hasOwnProperty("toISOString")?t.toISOString():t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1)+"-"+n(t.getUTCDate())+"T"+n(t.getUTCHours())+":"+n(t.getUTCMinutes())+":"+n(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}};e.exports=i},88:function(e,t,o){"use strict";function n(e,t){function o(e){if(r instanceof Array)for(c=0,f=0;f<r.length;f++)r[f].scrollTop>0&&(c=r[f].scrollTop);else c=r.scrollTop;(e||u!==c)&&t(c),u=c}function n(){clearTimeout(d),d=setTimeout(function(){o()},l),(new Date).getTime()-a>l&&(a=(new Date).getTime(),o(!0))}var i=e,r=e;e!==document.body&&e!==document.getElementsByTagName("html")[0]&&e!==window||(r=[document.body,document.getElementsByTagName("html")[0]],i=window);var s=!1,a=0,l=200,c=void 0,u=void 0,d=void 0,f=void 0;this.start=function(){s||(s=!0,i.addEventListener("scroll",n))},this.stop=function(){s&&(s=!1,i.removeEventListener("scroll",n))},this.destroy=function(){this.stop(),i=null,r=null,s=null,a=null,l=null,c=null,u=null,d=null,f=null},this.start.call(this)}e.exports=n},89:function(e,t,o){"use strict";e.exports=function(e){var t=0,o=0,n=e;if(n.offsetParent){do{t+=n.offsetLeft,o+=n.offsetTop,n=n.offsetParent}while(n);return{left:t,top:o}}return{top:e.offsetTop,left:e.offsetLeft}}},90:function(e,t,o){"use strict";e.exports=function(){var e=window,t=document,o=t.documentElement,n=t.getElementsByTagName("body")[0];return{width:e.innerWidth||n.clientWidth||o.clientWidth,height:e.innerHeight||n.clientHeight||o.clientHeight}}},91:function(e,t,o){"use strict";function n(){return!!i()}function i(){var e=r.get("FTSession");return e||null}var r=o(31);e.exports={isLoggedIn:n,getSession:i}},92:function(e,t,o){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=o(16),r=o(93),s=o(5),a=o(1),l={};l.getInitConfig=function(e,t){if("function"!=typeof t)throw"Callbacks not provided";if(!e)throw"No configuration parameters provided";e.hasOwnProperty("articleId")||t(new Error("Article ID not provided")),e.hasOwnProperty("url")||t(new Error("Article URL not provided")),e.hasOwnProperty("elId")||t(new Error("Element ID not provided")),e.hasOwnProperty("title")||t(new Error("Article title not provided"));var o=a.ftUser.getSession(),n=!1;!0===s.get("cache")&&o&&(n=!0);var r=function(){var r={title:e.title,url:e.url,articleId:e.articleId,el:e.elId};o&&(r.sessionId=o),void 0!==e.stream_type&&(r.stream_type=e.stream_type),void 0!==e.section&&(r.section=e.section),void 0!==e.tags&&(r.tags=e.tags),a.jsonp({url:s.get().suds.baseUrl+s.get().suds.endpoints.livefyre.init,data:r},function(o,r){if(o)return void t(o,null);r&&r.init?(!0!==r.init.unclassifiedArticle&&!0!==r.init.notAllowedToCreateCollection&&r.init.collectionMeta&&n&&(i.cacheInit(e.articleId,r.init),r.auth&&r.auth.token?i.cacheAuth(r.auth):i.removeAuth()),t(null,r.init)):t(new Error("No data received from SUDS."),null)})};if(n){var l=i.getInit(e.articleId);!0!==e.force&&l?(l.el=e.elId,t(null,l)):r()}else r()},l.getCommentCount=function(e,t){if("function"!=typeof t)throw"Callbacks not provided";e||t(new Error("Article ID not provided")),a.jsonp({url:s.get().suds.baseUrl+s.get().suds.endpoints.livefyre.commentCount,data:{articleId:e}},function(e,o){if(e)return void t(e,null);o&&void 0!==o.count?t(null,o.count):t(new Error("No data received from SUDS."),null)})},l.getCommentCounts=function(e,t){if("function"!=typeof t)throw"Callbacks not provided";e||t(new Error("Article IDs are not provided")),e.length||t();var o=s.get().suds.baseUrl+s.get().suds.endpoints.livefyre.commentCounts,n=o.length,i=[];e.forEach(function(e){(!i.length||i[i.length-1].size>=1e3)&&i.push({size:n,articles:[]}),i[i.length-1].articles.push(e),i[i.length-1].size+=e.toString().length});var r={};i.forEach(function(e,t){r[t]=function(t){a.jsonp({url:o,data:{articleIds:e.articles}},t)}}),a.functionSync.parallel(r,function(e,o){if(e)return void t(e);if(o&&Object.keys(o)&&Object.keys(o).length){var n=[];Object.keys(o).forEach(function(e){n.push(o[e])}),t(null,a.merge.apply(null,n))}else t(null,{})})};var c={};c.getAuth=function(e,t){if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("Callback not provided.");var o=a.ftUser.getSession(),n=!1;!0===s.get("cache")&&o&&(n=!0);var r={};o&&(r.sessionId=o);var l=function(){a.jsonp({url:s.get().suds.baseUrl+s.get().suds.endpoints.user.getAuth,data:r},function(e,o){if(e)return void t(e,null);n&&(o&&o.token?i.cacheAuth(o):i.removeAuth()),t(null,o)})};if(n){var c=i.getAuth(o);c&&!0!==e.force?t(null,c):l()}else l()},c.updateUser=function(e,t){if("function"!=typeof t)throw new Error("Callback not provided.");if(!e||"object"!==(void 0===e?"undefined":n(e)))return void t(new Error("Settings not provided."));var o=e;o.hasOwnProperty("pseudonym")&&(o.pseudonym=r.trim(o.pseudonym));var i=a.ftUser.getSession();i&&(o.sessionId=i),!e.hasOwnProperty("pseudonym")||e.hasOwnProperty("pseudonym")&&e.pseudonym?a.jsonp({url:s.get().suds.baseUrl+s.get().suds.endpoints.user.updateUser,data:o},function(e,o){if(e)return void t(e,null);o?"ok"===o.status?t(null,o):o.error?t({sudsError:!0,error:o.error},null):t(new Error("An error occured."),null):t(new Error("No data received."),null)}):t({sudsError:!0,error:"Pseudonym is blank."},null)},e.exports={livefyre:l,user:c}},93:function(e,t,o){"use strict";t.trim=function(e){return String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}},94:function(e,t,o){"use strict";function n(e,t){if("function"!=typeof t)throw new Error("Callback not provided");if(!e||"object"!==(void 0===e?"undefined":s(e)))return void t(new Error("Configuration is not provided."));if(!e.hasOwnProperty("articleId"))return void t(new Error("Article ID not provided."));if(!e.hasOwnProperty("title"))return void t(new Error("Article title not provided."));if(!e.hasOwnProperty("url"))return void t(new Error("Article url not provided."));var o=a.ftUser.getSession(),n=!1;!0===l.get("cache")&&o&&(n=!0);var i={title:e.title,url:e.url,articleId:e.articleId};"number"==typeof e.page&&(i.pageNumber=e.page),void 0!==e.section&&(i.section=e.section),void 0!==e.tags&&(i.tags=e.tags),o&&(i.sessionId=o),a.jsonp({url:l.get().ccs.baseUrl+l.get().ccs.endpoints.getComments,data:i},function(o,i){if(o)return void t(o,null);i&&i.collection?(!0!==i.collection.unclassifiedArticle&&n&&(i.userDetails&&i.userDetails.token?c.cacheAuth(i.userDetails):c.removeAuth()),t(null,{collection:i.collection}),!0===e.stream&&void 0===e.page&&u.create(i.collection.collectionId,{callback:function(e){t(null,{stream:e})},lastEventId:i.collection.lastEvent})):t(new Error("No data received from CCS."),null)})}function i(e,t){if("function"!=typeof t)throw new Error("Callback not provided");if(!e||"object"!==(void 0===e?"undefined":s(e)))return void t(new Error("Configuration is not provided."));if(!e.commentBody)return void t(new Error("Content not provided."));if(!e.collectionId)return void t(new Error("Collection ID not provided."));var o={collectionId:e.collectionId,commentBody:e.commentBody},n=a.ftUser.getSession();n&&(o.sessionId=n),a.jsonp({url:l.get().ccs.baseUrl+l.get().ccs.endpoints.postComment,data:o},function(e,o){if(e)return void t(e);t(null,o)})}function r(e,t){if("function"!=typeof t)throw new Error("Callback not provided");if(!e||"object"!==(void 0===e?"undefined":s(e)))return void t(new Error("Configuration is not provided."));if(!e.collectionId)return void t(new Error("Collection ID not provided."));if(!e.commentId)return void t(new Error("Comment ID not provided."));var o={collectionId:e.collectionId,commentId:e.commentId},n=a.ftUser.getSession();n&&(o.sessionId=n),a.jsonp({url:l.get().ccs.baseUrl+l.get().ccs.endpoints.deleteComment,data:o},function(e,o){if(e)return void t(e);t(null,o)})}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=o(1),l=o(5),c=o(16),u=o(32);e.exports={getComments:n,postComment:i,deleteComment:r}},95:function(e,t,o){"use strict";t.emit=function(e,t){t=t||{eventType:"info"};try{document.body.dispatchEvent(new CustomEvent("oCommentApi."+e,{detail:t,bubbles:!0}))}catch(e){}}},96:function(e,t,o){"use strict";function n(e){var t=!1;if(void 0!==window.location){var o=e.match(/(http[s]?:)?\/\/([^\/]*)/);o&&o[2]!==window.location.hostname&&(t=!0)}if(!0===t)return void 0!==(new XMLHttpRequest).withCredentials?new XMLHttpRequest:"undefined"!=typeof XDomainRequest&&new XDomainRequest;if(window.XMLHttpRequest&&("file:"!==window.location.protocol||!window.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1}var i=o(1);t.get=function(e,t){var o=n(e),r=!1;if(!o)return void t.error(new Error("No XML Http support"));var s=(new Date).getTime();-1!==e.indexOf("?")?e+="&_="+s:e+="?_="+s,o instanceof XMLHttpRequest?o.open("get",e,!0):(o.open("get",e),"function"!=typeof o.hasOwnProperty&&(o.timeout=9e3)),"undefined"!==o.onload?(o.onload=function(){if(!r)if(o.status&&200!==o.status||!o.responseText)t.error(new Error(o.statusText||"Failed response."));else{var e=o.responseText;try{e=JSON.parse(e)}catch(e){}i.logger.debug("stream","xhr onload","responseText:",e),t.success(e)}},o.onerror=function(e){r||(i.logger.debug("stream","xhr onerror","xhr error"),t.error(e))},o.ontimeout=function(){if(!r){i.logger.debug("stream","xhr ontimeout","xhr timeout"),r=!0;try{o.abort()}catch(e){}t.timeout()}},o.onprogress=function(){}):o.onreadystatechange=function(){if(4===o.readyState)if(o.responseText){var e=o.responseText;try{e=JSON.parse(e)}catch(e){}i.logger.debug("stream","xhr onreadystatechange","responseText:",e),t.success(e)}else i.logger.debug("stream","xhr onreadystatechange","xhr error"),t.error()},setTimeout(function(){o.send()},0)}},97:function(e,t,o){"use strict";e.exports={suds:{baseUrl:"//session-user-data.webservices.ft.com",endpoints:{livefyre:{init:"/v1/livefyre/init",commentCount:"/v1/livefyre/commentcount",commentCounts:"/v1/livefyre/commentcounts"},user:{updateUser:"/v1/user/updateuser",getAuth:"/v1/user/getauth"}}},ccs:{baseUrl:"//comment-creation.webservices.ft.com",endpoints:{getComments:"/v1/getComments",postComment:"/v1/postComment",deleteComment:"/v1/deleteComment"}},cacheConfig:{authBaseName:"comments-prod-auth-",initBaseName:"comments-prod-init-"},livefyre:{networkName:"ft"}}}});
//# sourceMappingURL=comments.js.map